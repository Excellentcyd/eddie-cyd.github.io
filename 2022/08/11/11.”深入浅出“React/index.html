<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Hexo Theme Keep">
    <meta name="description" content="Hexo Theme Keep">
    <meta name="author" content="Eddie">
    
    <title>
        
            11.和小达一起学React |
        
        Eddie&#39;s学习森林
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    <link rel="shortcut icon" href="/images/tou.jpg">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/css/font-awesome.min.css">
    <script id="hexo-configurations">
    let KEEP = window.KEEP || {};
    KEEP.hexo_config = {"hostname":"example.com","root":"/","language":"en","path":"search.json"};
    KEEP.theme_config = {"toc":{"enable":true,"number":false,"expand_all":true,"init_open":true},"style":{"primary_color":"#0066CC","avatar":"/images/tou.jpg","favicon":"/images/tou.jpg","article_img_align":"left","left_side_width":"260px","content_max_width":"920px","hover":{"shadow":true,"scale":true},"first_screen":{"enable":true,"background_img":"/images/bg.svg","description":"世界上绝大多数事情都没有太大意义,真理与爱除外"},"scroll":{"progress_bar":{"enable":true},"percent":{"enable":true}}},"local_search":{"enable":true,"preload":true},"code_copy":{"enable":true,"style":"default"},"pjax":{"enable":true},"lazyload":{"enable":true},"version":"3.4.5"};
    KEEP.language_ago = {"second":"%s seconds ago","minute":"%s minutes ago","hour":"%s hours ago","day":"%s days ago","week":"%s weeks ago","month":"%s months ago","year":"%s years ago"};
  </script>
<meta name="generator" content="Hexo 6.2.0"><link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
</head>


<body>
<div class="progress-bar-container">
    
        <span class="scroll-progress-bar"></span>
    

    
        <span class="pjax-progress-bar"></span>
        <span class="pjax-progress-icon">
            <i class="fas fa-circle-notch fa-spin"></i>
        </span>
    
</div>


<main class="page-container">

    

    <div class="page-main-content">

        <div class="page-main-content-top">
            <header class="header-wrapper">

    <div class="header-content">
        <div class="left">
            
            <a class="logo-title" href="/">
                Eddie&#39;s学习森林
            </a>
        </div>

        <div class="right">
            <div class="pc">
                <ul class="menu-list">
                    
                        <li class="menu-item">
                            <a class=""
                               href="/"
                            >
                                首页
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/archives"
                            >
                                所有博客
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/categories"
                            >
                                笔记类别
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/about"
                            >
                                关于
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               target="_blank" rel="noopener" href="https://gitee.com/excellentcyd"
                            >
                                GITEE
                            </a>
                        </li>
                    
                    
                        <li class="menu-item search search-popup-trigger">
                            <i class="fas fa-search"></i>
                        </li>
                    
                </ul>
            </div>
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fas fa-search"></i></div>
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list">
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/">首页</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/archives">所有博客</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/categories">笔记类别</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/about">关于</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       target="_blank" rel="noopener" href="https://gitee.com/excellentcyd">GITEE</a>
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="page-main-content-middle">

            <div class="main-content">

                
                    <div class="fade-in-down-animation">
    <div class="article-content-container">

        <div class="article-title">
            <span class="title-hover-animation">11.和小达一起学React</span>
        </div>

        
            <div class="article-header">
                <div class="avatar">
                    <img src="/images/tou.jpg">
                </div>
                <div class="info">
                    <div class="author">
                        <span class="name">Eddie</span>
                        
                            <span class="author-label">Engineer</span>
                        
                    </div>
                    <div class="meta-info">
                        <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fas fa-edit"></i>&nbsp;
        <span class="pc">2022-08-11 19:30:31</span>
        <span class="mobile">2022-08-11 19:30</span>
    </span>
    
        <span class="article-categories article-meta-item">
            <i class="fas fa-folder"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/categories/%E5%89%8D%E7%AB%AF/">前端</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    
    
        <span class="article-tags article-meta-item">
            <i class="fas fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/tags/React/">React</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
        <span class="article-wordcount article-meta-item">
            <i class="fas fa-file-word"></i>&nbsp;<span>17.1k Words</span>
        </span>
    
    
        <span class="article-min2read article-meta-item">
            <i class="fas fa-clock"></i>&nbsp;<span>73 Mins</span>
        </span>
    
    
        <span class="article-pv article-meta-item">
            <i class="fas fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
        </span>
    
</div>

                    </div>
                </div>
            </div>
        

        <div class="article-content markdown-body">
            <p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/../pictures/react_logo.jpeg"
                      alt="React Logo"
                ></p>
<h1 id="1-React基本介绍"><a href="#1-React基本介绍" class="headerlink" title="1.React基本介绍"></a>1.React基本介绍</h1><ul>
<li><strong>React</strong>是用于构建用户界面的<strong>JavaScript库</strong></li>
<li><strong>React</strong>—–<strong>React-Dom</strong>—–<strong>React-Router</strong>—–<strong>Redux</strong>    组成React框架</li>
<li><strong>官网</strong>       <a class="link"   target="_blank" rel="noopener" href="https://reactjs.org/" >https://reactjs.org/<i class="fas fa-external-link-alt"></i></a></li>
<li><strong>中文网</strong>   <a class="link"   target="_blank" rel="noopener" href="https://zh-hans.reactjs.org/" >https://zh-hans.reactjs.org/<i class="fas fa-external-link-alt"></i></a><br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/../pictures/%E6%A1%86%E6%9E%B6%E5%AF%B9%E6%AF%94.png"
                      alt="React"
                ></li>
</ul>
<h2 id="1-1React特点"><a href="#1-1React特点" class="headerlink" title="1.1React特点"></a>1.1React特点</h2><ul>
<li><strong>声明式UI：</strong>只需要描述UI看起来是什么样的，就跟写HTML一样。声明式(what)，命令式（how）</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> jsx = <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello React! 动态数据变化:&#123;count&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>组件化：</strong>基于组件进行开发，开发项目是在组合、复用多个组件</li>
<li><strong>学习一次，随处使用：</strong>可以开发所有界面，Web,移动端，VR</li>
</ul>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/../pictures/react-use.png"
                      alt="React"
                ></p>
<h2 id="1-2React脚手架"><a href="#1-2React脚手架" class="headerlink" title="1.2React脚手架"></a>1.2React脚手架</h2><h3 id="1-2-1脚手架"><a href="#1-2-1脚手架" class="headerlink" title="1.2.1脚手架"></a>1.2.1脚手架</h3><p>​	保证前端开发过程顺利进行而搭设的开发平台</p>
<h3 id="1-2-2作用"><a href="#1-2-2作用" class="headerlink" title="1.2.2作用"></a>1.2.2作用</h3><p>​	省去繁琐的<strong>工具配置过程</strong></p>
<p>​	开始时：搭好架子，省去Webpack的配置</p>
<p>​	开发时：热更新、格式化代码、git提交时自动校验代码格式</p>
<p>​	发布时：一键自动打包(代码压缩、优化、按需加载)</p>
<h3 id="1-2-3命令，初始化项目"><a href="#1-2-3命令，初始化项目" class="headerlink" title="1.2.3命令，初始化项目"></a>1.2.3命令，初始化项目</h3><p>原始：1.全局安装<code>npm i -g create-react-app</code> 2. 通过脚手架的命令来创建 React 项目</p>
<p>推荐：在终端输入<code>npx create-react-app react-basic</code></p>
<ul>
<li><code>npx create-react-app</code> 是<strong>固定命令</strong></li>
<li><code>create-react-app</code>是React<strong>脚手架名称</strong></li>
<li><code>react-basic</code>表示<strong>项目名称</strong>，可以修改</li>
<li>npx是 npm v5.2 版本新添加的命令，用来简化 npm 中工具包的使用</li>
</ul>
<p>启动项目：<code>npm start</code>或<code>yarn start</code></p>
<h3 id="1-2-4项目目录结构调整"><a href="#1-2-4项目目录结构调整" class="headerlink" title="1.2.4项目目录结构调整"></a>1.2.4项目目录结构调整</h3><ul>
<li>说明：<ul>
<li><code>src</code>是写代码进行项目开发的目录</li>
<li>查看 <code>package.json</code> 两个核心库：<code>react</code>、<code>react-dom</code>（脚手架已经帮我们安装好，我们直接用即可）</li>
</ul>
</li>
<li>调整：<ul>
<li>删除 src 目录下的所有文件</li>
<li>创建<strong>Index.js</strong>作为项目的<strong>入口文件</strong>，直接写React代码即可</li>
</ul>
</li>
</ul>
<h2 id="1-3React基本使用"><a href="#1-3React基本使用" class="headerlink" title="1.3React基本使用"></a>1.3React基本使用</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.导入2个核心包，React和ReactDOM</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ReactDOM</span> <span class="keyword">from</span> <span class="string">&#x27;react-dom&#x27;</span></span><br><span class="line"><span class="comment">//2.创建元素（虚拟DOM）</span></span><br><span class="line"><span class="comment">//参数1：标签的名字 h1,div,p</span></span><br><span class="line"><span class="comment">//参数2：标签的属性，对象</span></span><br><span class="line"><span class="comment">//参数3：标签的内容</span></span><br><span class="line"><span class="keyword">const</span> element = <span class="title class_">React</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;h1&#x27;</span>,&#123;<span class="attr">id</span>:<span class="string">&#x27;box&#x27;</span>,<span class="attr">title</span>:<span class="string">&#x27;haha&#x27;</span>&#125;,<span class="string">&#x27;hello react&#x27;</span>)</span><br><span class="line"><span class="comment">//3.渲染React元素到页面</span></span><br><span class="line"><span class="comment">//参数1：渲染哪个React元素</span></span><br><span class="line"><span class="comment">//参数2：渲染到哪个容器里面</span></span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(element,<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>))</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">创建如下所示：</span><br><span class="line">&lt;ul class=&quot;list&quot;&gt;</span><br><span class="line">    &lt;li&gt;香蕉&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;橘子&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;苹果&lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br><span class="line"></span><br><span class="line">const element = React.createElement(&#x27;ul&#x27;,&#123;className:&#x27;list&#x27;&#125;,</span><br><span class="line">[</span><br><span class="line">    React.createElement(&#x27;li&#x27;,null,&#x27;香蕉&#x27;),</span><br><span class="line">    React.createElement(&#x27;li&#x27;,null,&#x27;橘子&#x27;),</span><br><span class="line">    React.createElement(&#x27;li&#x27;,null,&#x27;苹果&#x27;),</span><br><span class="line">])</span><br></pre></td></tr></table></figure>

<h1 id="2-JSX"><a href="#2-JSX" class="headerlink" title="2.JSX"></a>2.JSX</h1><h2 id="2-1-createElement的问题"><a href="#2-1-createElement的问题" class="headerlink" title="2.1 createElement的问题"></a>2.1 createElement的问题</h2><ul>
<li>繁琐不简洁</li>
<li>不直观，无法一眼看出所描述的结构</li>
<li>不优雅，开发体验不好</li>
</ul>
<h2 id="2-2-JSX简介"><a href="#2-2-JSX简介" class="headerlink" title="2.2 JSX简介"></a>2.2 JSX简介</h2><p>​	<strong>是什么：</strong> <strong>JSX</strong>是<strong>JavaScript XML</strong>的缩写，表示在Javascript代码中写XML(HTML)格式的代码。</p>
<p>​	<strong>优势：</strong> <strong>声明式语法</strong>更加直观，与HTML结构相同，降低学习成本，提高开发效率。</p>
<p>![JSX 声明式vs命令式](..&#x2F;pictures&#x2F;JSX 声明式vs命令式.png)</p>
<h2 id="2-3使用步骤"><a href="#2-3使用步骤" class="headerlink" title="2.3使用步骤"></a>2.3使用步骤</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.导入react和reactDOM包</span><br><span class="line">2.使用jsx语法创建react元素</span><br><span class="line">3.把react元素渲染到页面中</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.导入2个核心包，React和ReactDOM</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ReactDOM</span> <span class="keyword">from</span> <span class="string">&#x27;react-dom&#x27;</span></span><br><span class="line"><span class="comment">//2.创建元素（虚拟DOM）</span></span><br><span class="line"><span class="keyword">const</span> element = <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&#x27;box&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>我是box<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>第一个li<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>第二个li<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="comment">//3.渲染React元素到页面</span></span><br><span class="line"><span class="comment">//参数1：渲染哪个React元素</span></span><br><span class="line"><span class="comment">//参数2：渲染到哪个容器里面</span></span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(element,<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>))</span><br></pre></td></tr></table></figure>

<h2 id="2-4-JSX的注意事项"><a href="#2-4-JSX的注意事项" class="headerlink" title="2.4 JSX的注意事项"></a>2.4 JSX的注意事项</h2><ul>
<li>只有在<strong>脚手架</strong>中<strong>才能使用 jsx</strong> 语法，因为JSX需要经过 <strong>babel</strong> 的编译处理，才能在浏览器中使用。脚手架中已经默认有了这个配置。</li>
<li>JSX必须要有一个<strong>根节点</strong><ul>
<li><strong>幽灵节点</strong>，不会渲染任何内容  <code>&lt;&gt;&lt;/&gt;</code> <code>&lt;React.Fragment&gt;&lt;/React.Fragment&gt;</code></li>
</ul>
</li>
<li><strong>标签有开始就要有结束</strong>，没有子节点的元素可以使用<code>/&gt;</code>结束，比如<code>&lt;img  /&gt;</code></li>
<li>JSX中语法更接近 JavaScript<ul>
<li><code>class</code> &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt; <code>className</code></li>
<li><code>for</code>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt;  <code>htmlFor</code></li>
</ul>
</li>
<li>JSX可以换行，如果JSX有多行，推荐使用<code>()</code>包裹 JSX，防止自动插入分号的bug</li>
</ul>
<h2 id="2-5-prettier插件自动格式化代码"><a href="#2-5-prettier插件自动格式化代码" class="headerlink" title="2.5 prettier插件自动格式化代码"></a>2.5 prettier插件自动格式化代码</h2><ul>
<li><p>安装：</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/../pictures/prettier.png"
                      alt="prettier"
                ></p>
</li>
<li><p>添加prettier配置</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.保存到额时候用使用prettier进行格式化</span></span><br><span class="line"><span class="string">&quot;editor.formatOnSave&quot;</span>: <span class="literal">true</span>,</span><br><span class="line"><span class="comment">//2.不要有分号</span></span><br><span class="line"><span class="string">&quot;prettier.semi&quot;</span>: <span class="literal">false</span>,</span><br><span class="line"><span class="comment">//3.使用单引号</span></span><br><span class="line"><span class="string">&quot;prettier.singleQuote&quot;</span>: <span class="literal">true</span>,</span><br><span class="line"><span class="comment">//4.默认使用prittier作为格式化工具</span></span><br><span class="line"><span class="string">&quot;editor.defaultFormatter&quot;</span>: <span class="string">&quot;esbenp.prettier-vscode&quot;</span>,</span><br></pre></td></tr></table></figure>

<h2 id="2-6-JSX中嵌入JavaScript表达式"><a href="#2-6-JSX中嵌入JavaScript表达式" class="headerlink" title="2.6 JSX中嵌入JavaScript表达式"></a>2.6 JSX中嵌入JavaScript表达式</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">能被console.log()打印的才是表达式</span><br><span class="line">在jsx中使用花括号&#123;&#125;，提供js表达式</span><br></pre></td></tr></table></figure>

<ul>
<li>基本使用</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> name = <span class="string">&#x27;张三&#x27;</span></span><br><span class="line"><span class="keyword">const</span> age = <span class="number">18</span></span><br><span class="line"><span class="keyword">const</span> title = (</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    姓名：&#123;name&#125;, 年龄：&#123;age&#125;</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<ul>
<li>可以访问对象的属性</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> car = &#123;</span><br><span class="line">    <span class="attr">brand</span>: <span class="string">&#x27;玛莎拉蒂&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> title = (</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    汽车：&#123;car.brand&#125;</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<ul>
<li>可以访问数组的下标</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> friends = [<span class="string">&#x27;张三&#x27;</span>, <span class="string">&#x27;李四&#x27;</span>]</span><br><span class="line"><span class="keyword">const</span> title = (</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    汽车：&#123;friends[1]&#125;</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<ul>
<li>可以使用三元运算符</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> gender = <span class="number">18</span></span><br><span class="line"><span class="keyword">const</span> title = (</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    性别：&#123;age &gt;= 18? &#x27;是&#x27;:&#x27;否&#x27;&#125;</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<ul>
<li>可以调用方法</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">sayHi</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;你好&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> title = <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>姓名：&#123;sayHi()&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<ul>
<li>JSX本身</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> span = <span class="language-xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span>我是一个span<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="keyword">const</span> title = <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>盒子&#123;span&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<ul>
<li>JSX中的<strong>注释</strong></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="comment">/* 这是jsx中的注释 */</span>&#125;   推荐快键键 ctrl + /</span><br></pre></td></tr></table></figure>

<ul>
<li>不要出现语句，比如<code>if</code> <code>for</code></li>
</ul>
<h2 id="2-7条件渲染"><a href="#2-7条件渲染" class="headerlink" title="2.7条件渲染"></a>2.7条件渲染</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在react中，一切都是javascript，所以条件渲染完全是通过js来控制的,没有任何新知识点</span><br></pre></td></tr></table></figure>

<ul>
<li>通过判断<code>if/else</code>控制</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isLoding = <span class="literal">false</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">loadData</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (isLoding) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>数据加载中.....<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>数据加载完成，此处显示加载后的数据<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> title = <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;loadData()&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(title, <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>))</span><br></pre></td></tr></table></figure>

<ul>
<li>通过三元运算符控制</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isLoding = <span class="literal">false</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">loadData</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> isLoding ? (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>数据加载中.....<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  ) : (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>数据加载完成，此处显示加载后的数据<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>逻辑运算符</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isLoding = <span class="literal">false</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">loadData</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> isLoding &amp;&amp; <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>加载中...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> title = <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;loadData()&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h2 id="2-8-vscode配置自动补全"><a href="#2-8-vscode配置自动补全" class="headerlink" title="2.8 vscode配置自动补全"></a>2.8 vscode配置自动补全</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 当按tab键的时候，会自动提示</span></span><br><span class="line"><span class="string">&quot;emmet.triggerExpansionOnTab&quot;</span>: <span class="literal">true</span>,</span><br><span class="line"><span class="string">&quot;emmet.showAbbreviationSuggestions&quot;</span>: <span class="literal">true</span>,</span><br><span class="line"><span class="comment">// jsx的提示</span></span><br><span class="line"><span class="string">&quot;emmet.includeLanguages&quot;</span>: &#123;</span><br><span class="line">  <span class="string">&quot;javascript&quot;</span>: <span class="string">&quot;javascriptreact&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-9列表渲染"><a href="#2-9列表渲染" class="headerlink" title="2.9列表渲染"></a>2.9列表渲染</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">我们经常需要遍历一个数组来重复渲染一段结构</span><br><span class="line">在react中，通过 map方法 进行列表的渲染</span><br></pre></td></tr></table></figure>

<ul>
<li>列表的渲染</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> names = [<span class="string">&#x27;关羽&#x27;</span>, <span class="string">&#x27;张飞&#x27;</span>, <span class="string">&#x27;赵云&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> list = names.<span class="title function_">map</span>(<span class="function"><span class="params">item</span> =&gt;</span> <span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;item&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> dv = (</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span>&#123;list&#125;<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">)</span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(dv, <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>))</span><br></pre></td></tr></table></figure>

<ul>
<li>直接在JSX中渲染</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> names = [<span class="string">&#x27;关羽&#x27;</span>, <span class="string">&#x27;张飞&#x27;</span>, <span class="string">&#x27;赵云&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> dv = (</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span>&#123;names.map(item =&gt; <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;item&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span>)&#125;<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<ul>
<li>key属性的使用</li>
</ul>
<p><strong>注意：列表渲染时应该给重复渲染的元素添加key属性，key属性的值要保证唯一</strong></p>
<p><strong>注意：key值避免使用index下标，因为下标会发生改变</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> dv = (</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;names.map(item =&gt; (</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;item&#125;</span>&gt;</span>&#123;item&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      ))&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h2 id="2-10样式"><a href="#2-10样式" class="headerlink" title="2.10样式"></a>2.10样式</h2><h3 id="2-10-1行内样式-style"><a href="#2-10-1行内样式-style" class="headerlink" title="2.10.1行内样式-style"></a>2.10.1行内样式-style</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> dv = (</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">color:</span> &#x27;<span class="attr">red</span>&#x27;, <span class="attr">backgroundColor:</span> &#x27;<span class="attr">pink</span>&#x27; &#125;&#125;&gt;</span>style样式<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h3 id="2-10-2类名-className"><a href="#2-10-2类名-className" class="headerlink" title="2.10.2类名-className"></a>2.10.2类名-className</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 导入样式</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./base.css&#x27;</span></span><br><span class="line"><span class="keyword">const</span> dv = <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;title&quot;</span>&gt;</span>style样式<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h3 id="base-css样式文件"><a href="#base-css样式文件" class="headerlink" title="base.css样式文件"></a>base.css样式文件</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.title</span> &#123;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">  <span class="attribute">background-color</span>: pink;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-11总结"><a href="#2-11总结" class="headerlink" title="2.11总结"></a>2.11总结</h2><ul>
<li>JSX是React的核心内容</li>
<li>JSX表示在JS代码中书写HTML结构，是React<strong>声明式</strong>的体现</li>
<li>使用JSX配合嵌入的JS表达式，条件渲染，列表渲染，可以渲染任意的UI结构</li>
<li>结果使用className和style的方式给JSX添加样式</li>
<li>React完全利用JS的语言自身的能力来编写UI，而不是造轮子增强HTML的功能。（对比VUE）</li>
</ul>
<h1 id="3-组件"><a href="#3-组件" class="headerlink" title="3.组件"></a>3.组件</h1><h2 id="3-1组件的基本介绍"><a href="#3-1组件的基本介绍" class="headerlink" title="3.1组件的基本介绍"></a>3.1组件的基本介绍</h2><ul>
<li>组件是React中<strong>最基本的内容</strong>，使用React就一定在使用组件</li>
<li>组件表示页面中的<strong>部分功能</strong>，页面中的东西都是由组件组成的</li>
<li>多个组件<strong>组合而成</strong>，可以实现完整的页面功能</li>
<li>组件特点：<strong>可复用</strong>，<strong>每个组件相互独立</strong>，可组合</li>
</ul>
<h2 id="3-2React创建组件"><a href="#3-2React创建组件" class="headerlink" title="3.2React创建组件"></a>3.2React创建组件</h2><h3 id="3-2-1函数组件"><a href="#3-2-1函数组件" class="headerlink" title="3.2.1函数组件"></a>3.2.1函数组件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">函数组件：使用JS的函数或者箭头函数创建的组件</span><br></pre></td></tr></table></figure>

<ul>
<li>为了区分普通标签，函数<strong>组件</strong>的名称必须<strong>大写字母开头</strong></li>
<li><strong>必须有返回值</strong>，返回一个<strong>结构</strong></li>
<li>如果<strong>不渲染任何内容</strong>，<strong>return一个null</strong>即可</li>
</ul>
<p><strong>使用函数创建组件：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Hello</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>这是一个函数组件<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> element = <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>函数组件<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">Hello</span>&gt;</span><span class="tag">&lt;/<span class="name">Hello</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">	<span class="tag">&lt;<span class="name">Hello</span>&gt;</span><span class="tag">&lt;/<span class="name">Hello</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p><strong>使用箭头函数创建组件：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">Hello</span> = (<span class="params"></span>) =&gt; <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>这是一个函数组件<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="keyword">const</span> element = <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>函数组件<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">Hello</span>&gt;</span><span class="tag">&lt;/<span class="name">Hello</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">	<span class="tag">&lt;<span class="name">Hello</span>&gt;</span><span class="tag">&lt;/<span class="name">Hello</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p><strong>调用&#x2F;渲染组件：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Hello</span> /&gt;</span></span>, <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>))</span><br></pre></td></tr></table></figure>

<h3 id="3-2-2知识回顾-类与继承"><a href="#3-2-2知识回顾-类与继承" class="headerlink" title="3.2.2知识回顾(类与继承)"></a>3.2.2知识回顾(类与继承)</h3><p><strong>Class基本语法</strong></p>
<ul>
<li><p>在 ES6 之前通过构造函数创建对象</p>
</li>
<li><p>在 ES6 中新增了一个关键字 class, 类 和构造函数类似，用于创建对象</p>
<ul>
<li>类与对象的区别</li>
<li>类：指的是一类的事物，是个概念，比如车 手机 水杯等</li>
<li>对象：一个具体的事物，有具体的特征和行为，比如一个手机，我的手机等， 类可以创建出来对象。</li>
</ul>
</li>
<li><p>类创建对象的基本语法</p>
<ul>
<li>基本语法<code>class 类名&#123;&#125;</code></li>
<li>构造函数<code>constructor</code>的用法，创建对象</li>
<li>在类中提供方法，直接提供即可</li>
<li>在类中不需要使用,分隔</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.ES6之前的写法</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Teacher</span>(<span class="params">name,age</span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">age</span> = age</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Teacher</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">sayHi</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`大家好我是`</span> + <span class="variable language_">this</span>.<span class="property">name</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> itmo = <span class="keyword">new</span> <span class="title class_">Teacher</span>(<span class="string">&#x27;王&#x27;</span>,<span class="number">30</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(itmo)</span><br><span class="line"><span class="comment">//2.ES6的写法</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Teacher</span>&#123;</span><br><span class="line">    <span class="comment">//构造函数</span></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">name,age</span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">age</span> = age</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">sayHi</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;大家好，我是&#x27;</span> + <span class="variable language_">this</span>.<span class="property">name</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>extends实现继承</strong></p>
<ul>
<li>类可以使用它继承的类中所有的成员（属性和方法）</li>
<li>类中可以提供自己的属性和方法</li>
<li>注意：如果想要给类中新增属性，必须<strong>先调用 super 方法</strong></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Chinese</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Person</span>&#123; </span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">name,gender</span>)&#123;</span><br><span class="line">        <span class="variable language_">super</span>(name,gender)<span class="comment">//!父类的构造函数</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">skin</span> = <span class="string">&#x27;yellow&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">pingpong</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;乒乓球&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br><span class="line"><span class="comment">// Chinese继承了Person的方法和属性，然后还有自己的属性skin和方法pingpong</span></span><br></pre></td></tr></table></figure>

<h3 id="3-2-3类组件"><a href="#3-2-3类组件" class="headerlink" title="3.2.3类组件"></a>3.2.3类组件</h3><p><strong>用类创建组件的约束</strong></p>
<ul>
<li>类组件的名称必须<strong>大写字母开头</strong></li>
<li>类组件应该<strong>继承</strong> <code>React.Component</code>父类，从而可以使用父类中提供的方法和属性</li>
<li>类组件必须提供<code>render</code>方法,<code>render</code>方法必须有<strong>返回值</strong>，表示该组件的结构</li>
</ul>
<p><strong>定义组件</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Hello</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>&#123;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>我是Hello组件<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>使用组件</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> element = (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>函数组件<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Hello</span>&gt;</span><span class="tag">&lt;/<span class="name">Hello</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Hello</span>&gt;</span><span class="tag">&lt;/<span class="name">Hello</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h3 id="3-2-4提取组件到单独的js文件"><a href="#3-2-4提取组件到单独的js文件" class="headerlink" title="3.2.4提取组件到单独的js文件"></a>3.2.4提取组件到单独的js文件</h3><ul>
<li>组件作为一个独立的个体，一般会放到一个<strong>独立的JS文件</strong>中</li>
</ul>
<ol>
<li>在src中准备文件夹components,创建Hello.js或者Hello.jsx</li>
<li>在 Hello.js 中导入React (函数组件可以不导入，类组件必须导入，因为要继承<code>React.Component</code>)</li>
<li>创建组件（函数 或 类）</li>
<li>在 Hello.js 中导出该组件</li>
<li>在 index.js 中导入 Hello 组件</li>
<li>渲染组件</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.类组件</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Component</span> &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Hello</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span>&#123;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span>(</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>这是一个Hello组件<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//导出组件</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Hello</span></span><br><span class="line"><span class="comment">//2.函数组件</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Demo</span> = (<span class="params"></span>) =&gt; <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>这是一个函数组件<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Demo</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&quot;react&quot;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ReactDOM</span> <span class="keyword">from</span> <span class="string">&quot;react-dom&quot;</span></span><br><span class="line"><span class="comment">//导入组件</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Hello</span> <span class="keyword">from</span> <span class="string">&#x27;./components/Hello.js&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Demo</span> <span class="keyword">from</span> <span class="string">&#x27;./components/Demo.js&#x27;</span></span><br><span class="line"><span class="keyword">const</span> element = (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>函数组件<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Hello</span>&gt;</span><span class="tag">&lt;/<span class="name">Hello</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Hello</span>&gt;</span><span class="tag">&lt;/<span class="name">Hello</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Demo</span>&gt;</span><span class="tag">&lt;/<span class="name">Demo</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">)</span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(element,<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>))</span><br></pre></td></tr></table></figure>

<h3 id="3-2-5有状态组件-x2F-无状态组件"><a href="#3-2-5有状态组件-x2F-无状态组件" class="headerlink" title="3.2.5有状态组件&#x2F;无状态组件"></a>3.2.5有状态组件&#x2F;无状态组件</h3><ul>
<li><strong>状态（state）</strong>即组件的私有数据，当组件的状态发生了改变，页面结构也就发生了改变。</li>
<li><strong>函数组件</strong>又叫做<strong>无状态组件</strong>   函数组件是不能自己提供数据(<strong>hooks</strong>允许函数组件提供数据)</li>
<li><strong>函数组件</strong>没有状态，只负责页面的展示(静态，不会发生变化)性能比较高</li>
<li><strong>类组件</strong>又叫做<strong>有状态组件</strong> 类组件可以自己提供数据，数据如果发生了改变，内容会自动的更新</li>
<li><strong>类组件</strong>有自己的状态，负责<strong>更新UI</strong>，只要类组件的数据发生了改变，UI就会发生更新</li>
</ul>
<p>在复杂的项目中，一般都是由函数组件和类组件共同配合来完成的。【增加了负担，所以有了hooks】比如计数器案例，点击按钮让数值+1， 0和1就是不同时刻的状态，当状态从0变成1之后，UI也要跟着发生变化。React想要实现这种功能，就需要使用有状态组件来完成。</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/../pictures/state%E7%BB%84%E4%BB%B6.png"
                     
                ></p>
<h3 id="3-2-6类组件的状态"><a href="#3-2-6类组件的状态" class="headerlink" title="3.2.6类组件的状态"></a>3.2.6类组件的状态</h3><ul>
<li>状态<code>state</code>即数据，是组件内部的<code>私有数据</code>,只有在组件内部可以使用</li>
<li><code>state的值是一个对象</code>,表示一个组件中可以有多个数据</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>&#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">super</span>()</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">state</span> = &#123;</span><br><span class="line">            <span class="attr">msg</span>:<span class="string">&#x27;hello react&#x27;</span>,</span><br><span class="line">            <span class="attr">count</span>:<span class="number">0</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;this.state.msg&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>更简单的语法</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    <span class="attr">msg</span>: <span class="string">&#x27;hello&#x27;</span>,</span><br><span class="line">    <span class="attr">count</span>: <span class="number">0</span>,</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;this.state.msg&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="4-事件处理"><a href="#4-事件处理" class="headerlink" title="4.事件处理"></a>4.事件处理</h1><h2 id="4-1注册事件"><a href="#4-1注册事件" class="headerlink" title="4.1注册事件"></a>4.1注册事件</h2><p><code>on时间名=&#123;事件处理程序&#125;</code>，如<code>onClick=&#123;this.handleClick&#125;</code></p>
<p><strong>注意：</strong>React事件采用驼峰命名法，如onClick，onMouseEnter</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>&#123;</span><br><span class="line">        state = &#123;</span><br><span class="line">            <span class="attr">count</span>:<span class="number">0</span></span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;this.state.count&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.clickFn&#125;</span>&gt;</span>+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">clickFn</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;点击事件&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-2事件对象"><a href="#4-2事件对象" class="headerlink" title="4.2事件对象"></a>4.2事件对象</h2><ul>
<li>可以通过事件处理程序的参数获取到事件对象</li>
<li>React 中的事件对象叫做：合成事件（对象）</li>
<li>合成事件：兼容所有浏览器，无需担心跨浏览器兼容性问题</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">handleClick</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    e.<span class="title function_">preventDefault</span>()<span class="comment">//阻止默认事件</span></span><br><span class="line">    e.<span class="title function_">stopPropagation</span>()<span class="comment">//阻止冒泡</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;事件对象&#x27;</span>, e)</span><br><span class="line">&#125;</span><br><span class="line">&lt;a onClick=&#123;<span class="variable language_">this</span>.<span class="property">handleClick</span>&#125;&gt;点我，不会跳转页面&lt;/a&gt;</span><br></pre></td></tr></table></figure>

<h2 id="4-3this的指向"><a href="#4-3this的指向" class="headerlink" title="4.3this的指向"></a>4.3this的指向</h2><ul>
<li>注册事件的this指向undefined，<strong>有问题，需要解决</strong></li>
<li>render方法中的this指向当前react组件</li>
</ul>
<p><strong>解决方案1：注册事件先写箭头函数，再用箭头函数调用</strong></p>
<ul>
<li>箭头函数的特点：自身没有this，访问的是外部的this</li>
<li>但是该方法会把大量的js处理逻辑放到jsx中，将来不容易维护</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>&#123;</span><br><span class="line">        state = &#123;</span><br><span class="line">            <span class="attr">count</span>:<span class="number">0</span></span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;this.state.count&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;this.state.count&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> this.clickFn()&#125;&gt;+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">clickFn</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;点击事件&#x27;</span>)</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">count</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>解决方案2：使用bind方法修改this的指向</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>&#123;</span><br><span class="line">        state = &#123;</span><br><span class="line">            <span class="attr">count</span>:<span class="number">0</span></span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;this.state.count&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;this.state.count&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> this.clickFn.bind(this)&#125;&gt;+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">clickFn</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;点击事件&#x27;</span>)</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">count</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>解决方案3：class类实例语法</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    <span class="attr">msg</span>: <span class="string">&#x27;hello react&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line"><span class="comment">//直接注册事件用箭头函数来写</span></span><br><span class="line">  clickFn = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">msg</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.clickFn&#125;</span>&gt;</span>点我<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-4-setState修改状态"><a href="#4-4-setState修改状态" class="headerlink" title="4.4.setState修改状态"></a>4.4.setState修改状态</h2><p>​	组件中的<strong>状态是可变的</strong>，使用<code>this.setState(&#123;要修改的数据&#125;)</code>来进行修改，并更新UI</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ReactDOM</span> <span class="keyword">from</span> <span class="string">&#x27;react-dom&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>&#123;</span><br><span class="line">        state = &#123;</span><br><span class="line">            <span class="attr">count</span>:<span class="number">0</span></span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;this.state.count&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;this.state.count&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.clickFn&#125;</span>&gt;</span>+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">    clickFn = <span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">count</span>)</span><br><span class="line">        <span class="comment">//修改组件状态</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;<span class="attr">count</span>:<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">count</span> + <span class="number">1</span>&#125;)</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">App</span>&gt;</span><span class="tag">&lt;/<span class="name">App</span>&gt;</span></span>,<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>))</span><br></pre></td></tr></table></figure>

<h1 id="5-表单的处理"><a href="#5-表单的处理" class="headerlink" title="5.表单的处理"></a>5.表单的处理</h1><blockquote>
<p>我们在开发过程中，经常需要操作表单元素，比如获取表单的值或者是设置表单的值。</p>
</blockquote>
<p>react中处理<strong>表单元素</strong>有两种方式：</p>
<ul>
<li>受控组件</li>
<li>非受控组件（DOM操作）</li>
</ul>
<h2 id="5-1受控组件"><a href="#5-1受控组件" class="headerlink" title="5.1受控组件"></a>5.1受控组件</h2><ul>
<li><p>HTML中表单元素是可输入的，即表单用户并维护着自己的可变状态（value）。</p>
</li>
<li><p>但是在react中，可变状态通常是保存在state中的，并且要求状态只能通过<code>setState</code>进行修改。</p>
</li>
<li><p>React中将state中的数据与表单元素的value值绑定到了一起，<code>由state的值来控制表单元素的值</code></p>
</li>
<li><p>受控组件：<strong>value值受到react控制的表单元素</strong></p>
</li>
</ul>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/../pictures/%E5%8F%97%E6%8E%A7%E7%BB%84%E4%BB%B6.png"
                     
                ></p>
<h2 id="5-2受控组件使用步骤"><a href="#5-2受控组件使用步骤" class="headerlink" title="5.2受控组件使用步骤"></a>5.2受控组件使用步骤</h2><ol>
<li>在state中添加一个状态，作为表单元素的value值（控制表单元素的值）</li>
<li>给表单元素添加onChange事件，设置state的值为表单元素的值（控制值的变化）</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>&#123;</span><br><span class="line">        state = &#123;</span><br><span class="line">           msg : <span class="string">&#x27;hello&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">h1</span>&gt;</span>受控组件<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                &#123;/*input框的值通过value属性进行控制 */&#125;</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">value</span>=<span class="string">&#123;this.state.msg&#125;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">onChange</span>=<span class="string">&#123;this.handleChange&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>  </span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">    handleChange = <span class="function">(<span class="params">e</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;<span class="attr">msg</span>:e.<span class="property">target</span>.<span class="property">value</span>&#125;)</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">msg</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="5-3常见的受控组件"><a href="#5-3常见的受控组件" class="headerlink" title="5.3常见的受控组件"></a>5.3常见的受控组件</h2><ul>
<li>文本框、文本域、下拉框（操作value属性）</li>
<li>复选框（操作checked属性）</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ReactDOM</span> <span class="keyword">from</span> <span class="string">&#x27;react-dom&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    <span class="attr">username</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">desc</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">city</span>:<span class="number">3</span>,</span><br><span class="line">    <span class="attr">agree</span>:<span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>常见的受控组件<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>文本框<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          姓名：</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">type</span>=<span class="string">&quot;text&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">value</span>=<span class="string">&#123;this.state.username&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">onChange</span>=<span class="string">&#123;this.changeUsername&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>文本域<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          描述：</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">textarea</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">value</span>=<span class="string">&#123;this.state.desc&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">cols</span>=<span class="string">&quot;30&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">rows</span>=<span class="string">&quot;10&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">onChange</span>=<span class="string">&#123;this.changeDesc&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          &gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>下拉框<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          选择城市</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">select</span> <span class="attr">value</span>=<span class="string">&#123;this.state.city&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;this.changeCity&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>&gt;</span>北京<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;2&quot;</span>&gt;</span>上海<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;3&quot;</span>&gt;</span>广州<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>复选框<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          是否已经阅读了协议</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">checked</span>=<span class="string">&#123;this.state.agree&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;this.changeAgree&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">  changeUsername = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123; <span class="attr">username</span>: e.<span class="property">target</span>.<span class="property">value</span> &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  changeDesc = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123; <span class="attr">desc</span>: e.<span class="property">target</span>.<span class="property">value</span> &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  changeCity = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123; <span class="attr">city</span>: e.<span class="property">target</span>.<span class="property">value</span> &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  changeAgree = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;<span class="attr">agree</span>: e.<span class="property">target</span>.<span class="property">checked</span>&#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">App</span>&gt;</span><span class="tag">&lt;/<span class="name">App</span>&gt;</span></span>, <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>))</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="5-4多表单元素的优化"><a href="#5-4多表单元素的优化" class="headerlink" title="5.4多表单元素的优化"></a>5.4多表单元素的优化</h2><p>问题：每个表单元素都需要一个单独的事件处理程序，处理太繁琐</p>
<p>优化：使用一个事件处理程序处理多个表单元素</p>
<p>步骤</p>
<ul>
<li>给表单元素添加name属性，名称与state属性名相同</li>
<li>根据表单元素类型获取对应的值</li>
<li>在事件处理程序中通过<code>[name]</code>修改对应的state</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ReactDOM</span> <span class="keyword">from</span> <span class="string">&#x27;react-dom&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    <span class="attr">username</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">desc</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">city</span>:<span class="number">3</span>,</span><br><span class="line">    <span class="attr">agree</span>:<span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>常见的受控组件<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>文本框<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          姓名：</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">type</span>=<span class="string">&quot;text&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">value</span>=<span class="string">&#123;this.state.username&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">onChange</span>=<span class="string">&#123;this.handleChange&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">name</span>=<span class="string">&quot;username&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>文本域<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          描述：</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">textarea</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">value</span>=<span class="string">&#123;this.state.desc&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">cols</span>=<span class="string">&quot;30&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">rows</span>=<span class="string">&quot;10&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">onChange</span>=<span class="string">&#123;this.handleChange&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">name</span>=<span class="string">&quot;desc&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          &gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>下拉框<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          选择城市</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">select</span> <span class="attr">value</span>=<span class="string">&#123;this.state.city&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;this.handleChange&#125;</span> <span class="attr">name</span>=<span class="string">&quot;city&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>&gt;</span>北京<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;2&quot;</span>&gt;</span>上海<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;3&quot;</span>&gt;</span>广州<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>复选框<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          是否已经阅读了协议</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">checked</span>=<span class="string">&#123;this.state.agree&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;this.handleChange&#125;</span> <span class="attr">name</span>=<span class="string">&quot;agree&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">  handleChange = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//1.区分需要修改谁</span></span><br><span class="line">    <span class="keyword">const</span> &#123; name,type &#125; = e.<span class="property">target</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">        [name]: type === <span class="string">&#x27;checkbox&#x27;</span> ? e.<span class="property">target</span>.<span class="property">checked</span> : e.<span class="property">target</span>.<span class="property">value</span></span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">App</span>&gt;</span><span class="tag">&lt;/<span class="name">App</span>&gt;</span></span>, <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>))</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="5-5非受控组件"><a href="#5-5非受控组件" class="headerlink" title="5.5非受控组件"></a>5.5非受控组件</h2><blockquote>
<p>非受控组件借助于ref，使用原生DOM的方式来获取表单元素的值</p>
</blockquote>
<p>使用步骤</p>
<ul>
<li>调用<code>React.createRef()</code>方法创建一个ref</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">super</span>()</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">txtRef</span> = <span class="title class_">React</span>.<span class="title function_">createRef</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>将创建好的ref对象添加到文本框中</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;text&quot;</span> ref=&#123;<span class="variable language_">this</span>.<span class="property">txtRef</span>&#125;/&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>通过ref对象获取文本框的值</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">handleClick = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//this.txtRef.current可以找到这个文本框</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">txtRef</span>.<span class="property">current</span>.<span class="property">value</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ReactDOM</span> <span class="keyword">from</span> <span class="string">&#x27;react-dom&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  txtRef = <span class="title class_">React</span>.<span class="title function_">createRef</span>()</span><br><span class="line">  state = &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">ref</span>=<span class="string">&#123;this.txtRef&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.clickFn&#125;</span>&gt;</span>获取值<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">  clickFn = <span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">txtRef</span>.<span class="property">current</span>.<span class="property">value</span>)</span><br><span class="line">  &#125; </span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">App</span>&gt;</span><span class="tag">&lt;/<span class="name">App</span>&gt;</span></span>, <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>))</span><br></pre></td></tr></table></figure>

<p>非受控组件用的不多，推荐使用受控组件</p>
<h1 id="6-组件通讯"><a href="#6-组件通讯" class="headerlink" title="6.组件通讯"></a>6.组件通讯</h1><p>​		<strong>组件</strong>是独立且封闭的单元，默认情况下，只能使用组件自己的数据。在组件化过程中，我们将一个完整的功能拆分成多个组件，以更好的完成整个应用的功能。而在这个过程中，多个组件之间不可避免的要<strong>共享某些数据</strong>。为了实现这些功能，就需要<strong>打破组件的独立封闭性</strong>，让其与外界沟通。这个过程就是<strong>组件通讯</strong>。</p>
<p>​		<strong>大白话：一个组件使用另外一个组件的状态</strong></p>
<h2 id="6-1props"><a href="#6-1props" class="headerlink" title="6.1props"></a>6.1props</h2><ul>
<li>组件本身是封闭的，但是组件可以通过一个props属性来接受外部的数据</li>
<li><strong>props的作用：</strong>接受传递给组件的数据</li>
<li>传递数据：给组件标签添加属性</li>
<li>接收数据：<strong>函数组件</strong>通过参数props接收数据，<strong>类组件</strong>通过this.props接收数据</li>
</ul>
<h3 id="6-1-1函数组件通讯"><a href="#6-1-1函数组件通讯" class="headerlink" title="6.1.1函数组件通讯"></a>6.1.1函数组件通讯</h3><p>在父组件里通过属性的方式，把值传到子组件里</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//父组件</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>这是一个App组件<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Demo</span> <span class="attr">car</span>=<span class="string">&quot;小黄车&quot;</span> <span class="attr">money</span>=<span class="string">&quot;100&quot;</span> <span class="attr">check</span>=<span class="string">&#123;true&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">Demo</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>子组件通过参数props进行接收，参数支持解构</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//子组件</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Demo</span>(<span class="params">props</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(props)</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>我是Demo组件<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;props.car&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;props.money&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;props.check?&#x27;yes&#x27;:&#x27;no&#x27;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-1-2类组件通讯"><a href="#6-1-2类组件通讯" class="headerlink" title="6.1.2类组件通讯"></a>6.1.2类组件通讯</h3><p>在父组件里通过属性的方式，把值传到子组件里</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>这是一个App组件<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Demo</span> <span class="attr">car</span>=<span class="string">&quot;小黄车&quot;</span> <span class="attr">money</span>=<span class="string">&quot;100&quot;</span> <span class="attr">check</span>=<span class="string">&#123;true&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">Demo</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Hello</span> <span class="attr">car</span>=<span class="string">&quot;小黄车&quot;</span> <span class="attr">money</span>=<span class="string">&quot;100&quot;</span> <span class="attr">check</span>=<span class="string">&#123;true&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">Hello</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>子组件直接使用this.props</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Hello</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span>&#123;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>这是Hello组件<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;this.props.car&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;this.props.money&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;this.props.check?&#x27;yes&#x27;:&#x27;no&#x27;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="6-1-3props的特点"><a href="#6-1-3props的特点" class="headerlink" title="6.1.3props的特点"></a>6.1.3props的特点</h3><ul>
<li>可以给组件传递<strong>任意类型的数据</strong></li>
<li>props是<strong>只读</strong>的，不允许修改props的数据。父组件的数据变了，子组件的数据也会更新。</li>
<li>注意：在<strong>类组件</strong>中使用的时候，**需要把props传递给super()**，否则构造函数无法获取到props</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Hello</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">props</span>) &#123;</span><br><span class="line">        <span class="comment">// 推荐将props传递给父类构造函数</span></span><br><span class="line">        <span class="variable language_">super</span>(props)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    	<span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>接收到的数据：&#123;this.props.age&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-1-4props的children属性"><a href="#6-1-4props的children属性" class="headerlink" title="6.1.4props的children属性"></a>6.1.4props的children属性</h3><p>写到标签中间的内容就是children</p>
<ul>
<li>children属性：表示该组件的子节点，只要组件有子节点，props就有该属性</li>
<li>children 属性与普通的props一样，值可以是任意值（文本、React元素、组件，甚至是函数）</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//写在中间的</span></span><br><span class="line">&lt;<span class="title class_">Hello</span>&gt;首页&lt;/<span class="title class_">Hello</span>&gt; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Hello</span>(<span class="params">props</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      该组件的子节点：&#123;props.children&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="title class_">Hello</span>&gt;我是子节点&lt;/<span class="title class_">Hello</span>&gt;</span><br></pre></td></tr></table></figure>

<h3 id="6-1-5props校验"><a href="#6-1-5props校验" class="headerlink" title="6.1.5props校验"></a>6.1.5props校验</h3><p>目的：<strong>校验</strong>接收的props的<strong>数据类型</strong>，把错误提示的更明显</p>
<p>对于组件来说，props是外来的，无法保证组件使用者传入什么格式的数据，如果传入的数据格式不对，可能会导致组件内部报错。<strong>组件的使用者不能很明确的知道错误的原因。</strong></p>
<p><strong>使用步骤：</strong></p>
<ol>
<li>安装包 prop-types （yarn add prop-types &#x2F; npm i props-types）</li>
<li>导入 prop-types</li>
<li>组件名.propTypes &#x3D; {} 来给组件的props添加校验规则</li>
<li>校验规则通过 PropTypes 对象来指定</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">PropTypes</span> <span class="keyword">from</span> <span class="string">&#x27;prop-types&#x27;</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params">props</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">    	<span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hi, &#123;props.colors&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">App</span>.<span class="property">propTypes</span> = &#123;</span><br><span class="line">    <span class="comment">// 约定colors属性为array类型</span></span><br><span class="line">    <span class="comment">// 如果类型不对，则报出明确错误，便于分析错误原因</span></span><br><span class="line">    <span class="attr">colors</span>: <span class="title class_">PropTypes</span>.<span class="property">array</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>约束规则</strong></p>
<ol>
<li>常见类型：array、bool、func、number、object、string</li>
<li>React元素类型：element</li>
<li>必填项：isRequired</li>
<li>特定结构的对象：shape({ })</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 常见类型</span></span><br><span class="line"><span class="attr">optionalFunc</span>: <span class="title class_">PropTypes</span>.<span class="property">func</span>,</span><br><span class="line"><span class="comment">// 必选</span></span><br><span class="line"><span class="attr">requiredFunc</span>: <span class="title class_">PropTypes</span>.<span class="property">func</span>.<span class="property">isRequired</span>,</span><br><span class="line"><span class="comment">// 特定结构的对象</span></span><br><span class="line"><span class="attr">optionalObjectWithShape</span>: <span class="title class_">PropTypes</span>.<span class="title function_">shape</span>(&#123;</span><br><span class="line">	<span class="attr">color</span>: <span class="title class_">PropTypes</span>.<span class="property">string</span>,</span><br><span class="line">	<span class="attr">fontSize</span>: <span class="title class_">PropTypes</span>.<span class="property">number</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="6-1-6props默认值"><a href="#6-1-6props默认值" class="headerlink" title="6.1.6props默认值"></a>6.1.6props默认值</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params">props</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            此处展示props的默认值：&#123;props.pageSize&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 默认值</span></span><br><span class="line"><span class="title class_">App</span>.<span class="property">defaultProps</span> = &#123;</span><br><span class="line">	<span class="attr">pageSize</span>: <span class="number">10</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 不传入pageSize属性</span></span><br><span class="line">&lt;<span class="title class_">App</span> /&gt;</span><br></pre></td></tr></table></figure>

<h3 id="补充：类的静态属性"><a href="#补充：类的静态属性" class="headerlink" title="补充：类的静态属性"></a>补充：类的静态属性</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>&#123;</span><br><span class="line">    name = <span class="string">&quot;&#x27;zs&#x27;,</span></span><br><span class="line"><span class="string">	static age = 18</span></span><br><span class="line"><span class="string">	sayHi()&#123;</span></span><br><span class="line"><span class="string">        console.log(&#x27;Hi&#x27;)</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">	static sayBye()&#123;</span></span><br><span class="line"><span class="string">        console.log(&#x27;bye&#x27;)</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">const p = new Person()</span></span><br><span class="line"><span class="string">console.log(p.name)</span></span><br><span class="line"><span class="string">p.sayHi()</span></span><br><span class="line"><span class="string">console.log(Person.age)</span></span><br><span class="line"><span class="string">Person.sayBye()</span></span><br></pre></td></tr></table></figure>

<h2 id="6-2组件通讯"><a href="#6-2组件通讯" class="headerlink" title="6.2组件通讯"></a>6.2组件通讯</h2><h3 id="6-2-1父传子"><a href="#6-2-1父传子" class="headerlink" title="6.2.1父传子"></a>6.2.1父传子</h3><ol>
<li>父组件的state对象提供数据</li>
<li>父组件中给子组件的标签添加属性，值为state中的数据</li>
<li>子组件通过props接受父组件中传递的数据</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//父组件</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ReactDOM</span> <span class="keyword">from</span> <span class="string">&#x27;react-dom&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Child</span> <span class="keyword">from</span> <span class="string">&#x27;./18父传子_子&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Father</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    <span class="attr">wife</span>:<span class="string">&#x27;&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>我是父组件<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          配偶：</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>  </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">placeholder</span>=<span class="string">&#x27;请输入配偶的名字&#x27;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">value</span>=<span class="string">&#123;this.state.wife&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">onChange</span>=<span class="string">&#123;this.handleChange&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">hr</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Child</span> <span class="attr">mama</span>=<span class="string">&#123;this.state.wife&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">Child</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">    </span><br><span class="line">  &#125;</span><br><span class="line">  handleChange = <span class="function">(<span class="params">e</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;<span class="attr">wife</span>:e.<span class="property">target</span>.<span class="property">value</span>&#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Father</span>&gt;</span><span class="tag">&lt;/<span class="name">Father</span>&gt;</span></span>, <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>))</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//子组件</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Child</span>(<span class="params">props</span>)&#123;</span><br><span class="line">  <span class="keyword">return</span>(</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h3</span>&gt;</span>我是子组件<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span>&gt;</span>妈妈的名字：&#123;props.mama&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="6-2-2子传父"><a href="#6-2-2子传父" class="headerlink" title="6.2.2子传父"></a>6.2.2子传父</h3><ol>
<li>父组件提供一个回调函数（用于接收数据），将该函数作为属性的值，传递给子组件</li>
<li>子组件通过 props 调用回调函数，将子组件的数据作为<strong>参数</strong>传递给回调函数</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//父组件</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ReactDOM</span> <span class="keyword">from</span> <span class="string">&#x27;react-dom&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Child</span> <span class="keyword">from</span> <span class="string">&#x27;./19子传父_子.js&#x27;</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Father</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">      <span class="attr">wife</span>:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      <span class="attr">sonwife</span>:<span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">h1</span>&gt;</span>我是父组件<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            配偶：</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>  </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">placeholder</span>=<span class="string">&#x27;请输入配偶的名字&#x27;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">value</span>=<span class="string">&#123;this.state.wife&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">onChange</span>=<span class="string">&#123;this.handleChange&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            儿媳妇：&#123;this.state.sonwife&#125;</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">hr</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Child</span> <span class="attr">wife</span>=<span class="string">&#123;this.state.wife&#125;</span> <span class="attr">changeName</span>=<span class="string">&#123;this.changeName&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">Child</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">      )</span><br><span class="line">      </span><br><span class="line">    &#125;</span><br><span class="line">    handleChange = <span class="function">(<span class="params">e</span>)=&gt;</span>&#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;<span class="attr">wife</span>:e.<span class="property">target</span>.<span class="property">value</span>&#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    changeName = <span class="function">(<span class="params">name</span>)=&gt;</span>&#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;<span class="attr">sonwife</span>:name&#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Father</span>&gt;</span><span class="tag">&lt;/<span class="name">Father</span>&gt;</span></span>, <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>))</span><br><span class="line">  </span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//子组件</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Component</span> &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> <span class="title class_">Child</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span>&#123;</span><br><span class="line">    state=&#123;</span><br><span class="line">        <span class="attr">wife</span>:<span class="string">&quot;&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">h3</span>&gt;</span>我是子组件<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">div</span>&gt;</span>妈妈的名字：&#123;this.props.wife&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    配偶的名字：</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">value</span>=<span class="string">&#123;this.state.wife&#125;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onChange</span>=<span class="string">&#123;this.handleChange</span> &#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">    handleChange = <span class="function">(<span class="params">e</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;<span class="attr">wife</span>:e.<span class="property">target</span>.<span class="property">wife</span>&#125;)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">props</span>.<span class="title function_">changeName</span>(e.<span class="property">target</span>.<span class="property">value</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-2-3兄弟组件通讯"><a href="#6-2-3兄弟组件通讯" class="headerlink" title="6.2.3兄弟组件通讯"></a>6.2.3兄弟组件通讯</h3><p>​	兄弟组件通讯的核心思想是<strong>状态提升</strong>，<code>将共享状态放到到最近的公共父组件中，由父组件管理这个状态</code></p>
<ul>
<li>父组件职责：<ul>
<li>提供共享状态</li>
<li>提供操作共享状态的方法</li>
</ul>
</li>
<li>要通讯的子组件只需通过props接受状态或操作状态的方法</li>
</ul>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/../pictures/%E7%8A%B6%E6%80%81%E6%8F%90%E5%8D%8702.png"
                     
                ></p>
<h3 id="6-2-4Context跨级组件通讯"><a href="#6-2-4Context跨级组件通讯" class="headerlink" title="6.2.4Context跨级组件通讯"></a>6.2.4Context跨级组件通讯</h3><p> <img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/../pictures/%E8%B7%A8%E7%BB%84%E4%BB%B6%E4%BC%A0%E9%80%92.png"
                     
                ></p>
<p>​	需要跨级组件传递时，如果使用props一层一层向下传递非常繁琐，推荐<strong>使用Context</strong></p>
<p><strong>实现</strong></p>
<ul>
<li>index调用 React. createContext() 创建 Provider（提供数据） 和 Consumer（消费数据） 两个组件。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">Provider</span>,<span class="title class_">Consumer</span> &#125; = <span class="title class_">React</span>.<span class="title function_">createContext</span>()</span><br><span class="line"><span class="keyword">export</span> &#123;<span class="title class_">Consumer</span>&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>index使用 Provider 包裹根元素，这样Provider就是最大的根元素。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">Provider</span> value=&#123;<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">color</span>&#125;&gt;</span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;<span class="name">h1</span>&gt;</span>APP组件<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;<span class="name">Father</span>&gt;</span><span class="tag">&lt;/<span class="name">Father</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/<span class="title class_">Provider</span>&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>设置 value 属性，表示要传递的数据。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">Provider</span> value=&#123;<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">color</span>&#125;&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>孙组件调用 Consumer 组件接收数据。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">Consumer</span>&gt;</span><br><span class="line">	&#123;<span class="function">(<span class="params">value</span>) =&gt;</span> </span><br><span class="line">   	 	<span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    		<span class="tag">&lt;<span class="name">h3</span>&gt;</span>我是孙组件&#123;value&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">	&#125;</span><br><span class="line">&lt;/<span class="title class_">Consumer</span>&gt;</span><br></pre></td></tr></table></figure>

<p>总结：</p>
<ol>
<li>如果两个组件是远方亲戚（比如，嵌套多层）可以使用Context实现组件通讯</li>
<li>Context提供了两个组件：Provider 和 Consumer</li>
<li>Provider组件：用来提供数据</li>
<li>Consumer组件：用来消费数据</li>
</ol>
<h1 id="7-组件的生命周期"><a href="#7-组件的生命周期" class="headerlink" title="7.组件的生命周期"></a>7.组件的生命周期</h1><h2 id="7-1概述"><a href="#7-1概述" class="headerlink" title="7.1概述"></a>7.1概述</h2><p>​	<strong>组件的生命周期</strong>：组件从被创建到挂载到页面中运行，再到组件不用时卸载的过程</p>
<p>​	<strong>钩子函数</strong>的作用：为开发人员在不同阶段操作组件提供了时机</p>
<ul>
<li>只有 <strong>类组件</strong> 才有 <strong>生命周期</strong>(函数组件没有生命周期)</li>
</ul>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/../pictures/%E7%BB%84%E4%BB%B6%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.png"
                     
                ></p>
<p><a class="link"   target="_blank" rel="noopener" href="http://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/" >http://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/<i class="fas fa-external-link-alt"></i></a></p>
<h2 id="7-2挂载阶段"><a href="#7-2挂载阶段" class="headerlink" title="7.2挂载阶段"></a>7.2挂载阶段</h2><p>执行时机：组件创建时（页面加载时）</p>
<p>执行顺序：</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/../pictures/%E7%BB%84%E4%BB%B6%E7%9A%84%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F.png"
                     
                ></p>
<table>
<thead>
<tr>
<th>钩子 函数</th>
<th>触发时机</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>constructor</td>
<td>创建组件时，最先执行</td>
<td>1. 初始化state  2. 创建Ref等3.绑定this指向</td>
</tr>
<tr>
<td>render</td>
<td>每次组件渲染都会触发</td>
<td>渲染UI（<strong>注意： 不能调用setState()</strong> ）</td>
</tr>
<tr>
<td>componentDidMount</td>
<td>组件挂载（完成DOM渲染）后</td>
<td>1. 发送网络请求   2.DOM操作</td>
</tr>
</tbody></table>
<h2 id="7-3更新阶段"><a href="#7-3更新阶段" class="headerlink" title="7.3更新阶段"></a>7.3更新阶段</h2><ul>
<li>执行时机：1. setState() 2. forceUpdate() 3. 组件接收到新的props</li>
<li>说明：以上三者任意一种变化，组件就会重新渲染</li>
<li>执行顺序</li>
</ul>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/../pictures/%E6%9B%B4%E6%96%B0%E9%98%B6%E6%AE%B5.png"
                     
                ></p>
<table>
<thead>
<tr>
<th>钩子函数</th>
<th>触发时机</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>render</td>
<td>每次组件渲染都会触发</td>
<td>渲染UI（与 挂载阶段 是同一个render）</td>
</tr>
<tr>
<td>componentDidUpdate</td>
<td>组件更新（完成DOM渲染）后</td>
<td>DOM操作，可以获取到更新后的DOM内容（<strong>注意： 不能调用setState()</strong> ）</td>
</tr>
</tbody></table>
<h2 id="7-4卸载阶段"><a href="#7-4卸载阶段" class="headerlink" title="7.4卸载阶段"></a>7.4卸载阶段</h2><ul>
<li>执行时机：组件从页面中消失</li>
</ul>
<table>
<thead>
<tr>
<th>钩子函数</th>
<th>触发时机</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>componentWillUnmount</td>
<td>组件将要卸载（从页面中消失）</td>
<td>执行清理工作，资源释放（比如：清理定时器等）</td>
</tr>
</tbody></table>
<h1 id="8-setState"><a href="#8-setState" class="headerlink" title="8.setState()"></a>8.setState()</h1><h2 id="8-1更新数据"><a href="#8-1更新数据" class="headerlink" title="8.1更新数据"></a>8.1更新数据</h2><ul>
<li>setState()修改数据是<strong>异步更新数据</strong>的</li>
</ul>
<p><code>当你调用 setState() 的时候，React.js 并不会马上修改 state,而是把这个对象放到一个更新队列里面,稍后才会从队列当中把新的状态提取出来合并【覆盖】到 state 当中，然后再触发组件更新</code></p>
<ul>
<li>多次调用 setState()只会触发一次重新渲染,所以后面的setState()<strong>不能依赖</strong>前面的，因为会<strong>覆盖</strong>掉。</li>
<li>在使用 React.js 的时候，并不需要担心多次进行 <code>setState</code> 会带来性能问题。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">    <span class="attr">count</span>:<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">count</span> + <span class="number">1</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">    <span class="attr">count</span>:<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">count</span> + <span class="number">1</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">    <span class="attr">money</span>:<span class="number">200</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">    <span class="attr">count</span>:<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">count</span> + <span class="number">4</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//相当于</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">    <span class="attr">count</span>:<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">count</span> + <span class="number">4</span>,</span><br><span class="line">    <span class="attr">money</span>:<span class="number">200</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="8-2推荐使用的setState语法"><a href="#8-2推荐使用的setState语法" class="headerlink" title="8.2推荐使用的setState语法"></a>8.2推荐使用的setState语法</h2><ul>
<li><p>推荐：使用 <code>setState((preState) =&gt; &#123;&#125;)</code> 语法</p>
</li>
<li><p>参数preState: React.js 会把上一个 <code>setState</code> 的结果传入这个函数</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="title function_">setState</span>(<span class="function">(<span class="params">preState</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">    	<span class="attr">count</span>: preState.<span class="property">count</span> + <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">count</span>) <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>

<p><strong>这种语法依旧是异步的，但是state可以获取到最新的状态，适用于需要调用多次setState。不会覆盖掉上面的</strong></p>
<h2 id="8-2-3setState的第二个参数"><a href="#8-2-3setState的第二个参数" class="headerlink" title="8.2.3setState的第二个参数"></a>8.2.3setState的第二个参数</h2><ul>
<li>场景：在状态更新（页面完成重新渲染）后立即执行某个操作。因为setState是异步的，会先执行下面的函数再执行setState,但是用这种方式可以先修改state再执行回调函数</li>
<li>语法：<code>setState(updater[, callback])</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="title function_">setState</span>(</span><br><span class="line">	<span class="function">(<span class="params">state</span>) =&gt;</span> (&#123;&#125;),<span class="comment">//第一个参数</span></span><br><span class="line">	<span class="function">() =&gt;</span> &#123;<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;这个回调函数会在状态更新后立即执行&#x27;</span>)&#125;<span class="comment">//第二个参数。会立即执行</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="title function_">setState</span>(</span><br><span class="line">	<span class="function">(<span class="params">state, props</span>) =&gt;</span> &#123;&#125;,</span><br><span class="line">	<span class="function">() =&gt;</span> &#123;</span><br><span class="line">		<span class="variable language_">document</span>.<span class="property">title</span> = <span class="string">&#x27;更新state后的标题：&#x27;</span> + <span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">count</span></span><br><span class="line">	&#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h1 id="9-组件性能优化"><a href="#9-组件性能优化" class="headerlink" title="9.组件性能优化"></a>9.组件性能优化</h1><h2 id="9-1组件更新机制"><a href="#9-1组件更新机制" class="headerlink" title="9.1组件更新机制"></a>9.1组件更新机制</h2><ul>
<li><p>setState() 的两个作用： 1. 修改 state 2. 更新组件（UI）</p>
</li>
<li><p>过程：父组件重新渲染时，也会重新渲染子组件。但只会渲染当前组件子树（当前组件及其所有子组件）</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/../pictures/%E7%BB%84%E4%BB%B6%E6%9B%B4%E6%96%B0.png"
                     
                ></p>
</li>
</ul>
<h2 id="9-2减轻state"><a href="#9-2减轻state" class="headerlink" title="9.2减轻state"></a>9.2减轻state</h2><ul>
<li>减轻 state：只存储跟组件渲染相关的数据（比如：count &#x2F; 列表数据 &#x2F; loading 等）</li>
<li>注意：不用做渲染的数据不要放在 state 中，比如定时器 id等 </li>
<li>对于这种需要在多个方法中用到的数据，应该直接放在 this 中 <ul>
<li>this.xxx &#x3D; ‘bbb’</li>
<li>this.xxx</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Hello</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">    <span class="title function_">componentDidMount</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// timerId存储到this中，而不是state中</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">timerId</span> = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;&#125;, <span class="number">2000</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">componentWillUnmount</span>(<span class="params"></span>) &#123;</span><br><span class="line">    	<span class="built_in">clearInterval</span>(<span class="variable language_">this</span>.<span class="property">timerId</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123; … &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="9-3避免不必要的重新渲染"><a href="#9-3避免不必要的重新渲染" class="headerlink" title="9.3避免不必要的重新渲染"></a>9.3避免不必要的重新渲染</h2><ul>
<li><p>组件更新机制：父组件更新会引起子组件也被更新，这种思路很清晰</p>
</li>
<li><p>问题：子组件没有任何变化时也会重新渲染 （接收到的props没有发生任何的改变）</p>
</li>
<li><p>解决方式：使用钩子函数 <code>shouldComponentUpdate(nextProps, nextState)</code></p>
</li>
<li><p>作用：通过返回值决定该组件是否重新渲染，返回 true 表示重新渲染，false 表示不重新渲染</p>
</li>
<li><p>触发时机：更新阶段的钩子函数，组件重新渲染前执行 （shouldComponentUpdate &#x3D;&gt; render）</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//nextProps即将要更新的props；nextState即将要更新的组件自己的state</span></span><br><span class="line"><span class="title function_">shouldComponentUpdate</span>(<span class="params">nextProps</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">money</span> === nextProps.<span class="property">money</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="9-4纯组件"><a href="#9-4纯组件" class="headerlink" title="9.4纯组件"></a>9.4纯组件</h2><ul>
<li>纯组件：<code>React.PureComponent</code> 与 <code>React.Component </code>功能相似</li>
<li>区别：PureComponent <strong>内部自动实现了 shouldComponentUpdate 钩子，不需要手动比较</strong>，只要state和props发生变化，就不会重新渲染</li>
<li>原理：纯组件内部通过分别 对比 前后两次 props 和 state 的值，来决定是否重新渲染组件</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Hello</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.PureComponent</span> &#123;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">        	<span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>纯组件<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="9-5纯组件比较-值类型"><a href="#9-5纯组件比较-值类型" class="headerlink" title="9.5纯组件比较-值类型"></a>9.5纯组件比较-值类型</h2><ul>
<li><p>说明：纯组件内部的对比是 shallow compare（浅层对比）</p>
</li>
<li><p>对于值类型来说：比较两个值是否相同（直接赋值即可，没有坑）</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> number = <span class="number">0</span></span><br><span class="line"><span class="keyword">let</span> newNumber = number</span><br><span class="line">newNumber = <span class="number">2</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(number === newNumber) <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">state = &#123; <span class="attr">number</span>: <span class="number">0</span> &#125;</span><br><span class="line"><span class="title function_">setState</span>(&#123;</span><br><span class="line">  <span class="attr">number</span>: <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">3</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// PureComponent内部对比：</span></span><br><span class="line">最新的state.<span class="property">number</span> === 上一次的state.<span class="property">number</span> <span class="comment">// false，重新渲染组件</span></span><br></pre></td></tr></table></figure>

<h2 id="9-6纯组件比较-引用类型"><a href="#9-6纯组件比较-引用类型" class="headerlink" title="9.6纯组件比较-引用类型"></a>9.6纯组件比较-引用类型</h2><ul>
<li>说明：纯组件内部的对比是 shallow compare（浅层对比）</li>
<li>对于引用类型来说：只比较对象的引用（地址）是否相同</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">number</span>: <span class="number">0</span> &#125;</span><br><span class="line"><span class="keyword">const</span> newObj = obj</span><br><span class="line">newObj.<span class="property">number</span> = <span class="number">2</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(newObj === obj) <span class="comment">// true</span></span><br></pre></td></tr></table></figure>



<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">state = &#123; <span class="attr">obj</span>: &#123; <span class="attr">number</span>: <span class="number">0</span> &#125; &#125;</span><br><span class="line"><span class="comment">// 错误做法</span></span><br><span class="line">state.<span class="property">obj</span>.<span class="property">number</span> = <span class="number">2</span></span><br><span class="line"><span class="title function_">setState</span>(&#123; <span class="attr">obj</span>: state.<span class="property">obj</span> &#125;)</span><br><span class="line"><span class="comment">// PureComponent内部比较：</span></span><br><span class="line">最新的state.<span class="property">obj</span> === 上一次的state.<span class="property">obj</span> <span class="comment">// true，不重新渲染组件</span></span><br></pre></td></tr></table></figure>

<p>纯组件的最佳实践：</p>
<p> <strong>注意：state 或 props 中属性值为引用类型时，应该创建新数据，不要直接修改原数据！</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 正确！创建新数据</span></span><br><span class="line"><span class="keyword">const</span> newObj = &#123;...state.<span class="property">obj</span>, <span class="attr">number</span>: <span class="number">2</span>&#125;</span><br><span class="line"><span class="title function_">setState</span>(&#123; <span class="attr">obj</span>: newObj &#125;)</span><br><span class="line"><span class="comment">// 正确！创建新数据</span></span><br><span class="line"><span class="comment">// 不要用数组的push / unshift 等直接修改当前数组的的方法</span></span><br><span class="line"><span class="comment">// 而应该用 concat 或 slice 等这些返回新数组的方法</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">	<span class="attr">list</span>: [...<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">list</span>, &#123;新数据&#125;]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="10-React路由"><a href="#10-React路由" class="headerlink" title="10.React路由"></a>10.React路由</h1><h2 id="10-1单页应用程序"><a href="#10-1单页应用程序" class="headerlink" title="10.1单页应用程序"></a>10.1单页应用程序</h2><ul>
<li>SPA： <code>Single Page Application</code>  单页面应用程序，整个应用中只有一个页面（index.html）</li>
<li>MPA : <code>Multiple Page Application</code>多页面应用程序，整个应用中有很多个页面（*.html）</li>
</ul>
<p><a class="link"   target="_blank" rel="noopener" href="https://music.163.com/" >网易云音乐<i class="fas fa-external-link-alt"></i></a>就是单页面应用程序。</p>
<p><strong>优势：</strong></p>
<ol>
<li>加快页面响应速度，降低了对服务器的压力<ul>
<li>传统的多页面应用程序，每次请求服务器返回的都是一整个完整的页面</li>
<li>单页面应用程序只有第一次会加载完整的页面，以后每次请求仅获取必要的数据</li>
</ul>
</li>
<li>更好的用户体验，运行更加流畅</li>
</ol>
<p><strong>缺点：</strong></p>
<ol>
<li><strong>不利于 SEO</strong> 搜索引擎优化 <ul>
<li>因为 爬虫 只爬取 HTML 页面中的文本内容，不会执行 JS 代码</li>
<li>可以通过 SSR（服务端渲染 Server Side Rendering）来解决 SEO 问题<ul>
<li>解释：先在服务器端把内容渲染出来，然后，返回给浏览器的就是纯 HTML 内容了</li>
</ul>
</li>
<li>页面静态化，比如，对于一个电商应用可以为每一个商品生产一个静态的HTML页面，静态 HTML 页面中是带有文字内容的，所以，有利于 SEO 的</li>
</ul>
</li>
</ol>
<h2 id="10-2React路由介绍"><a href="#10-2React路由介绍" class="headerlink" title="10.2React路由介绍"></a>10.2React路由介绍</h2><p>​	现代的前端应用大多都是 <strong>SPA（单页应用程序）</strong>，为了<strong>有效的使用单个页面来管理原来多页面的功能，前端路由应运而生</strong>。前端路由的功能：<strong>让用户从一个视图（页面）导航到另一个视图（页面）</strong></p>
<ul>
<li>前端路由是一套<strong>映射规则</strong>，在React中，是 <strong>URL路径</strong> 与 <strong>组件</strong> 的对应关系 ，简单来说就是：配置路径和组件（配对）</li>
</ul>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/../pictures/%E8%B7%AF%E7%94%B1%E6%98%AF%E8%A7%84%E5%88%991.png"
                     
                ><br><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/../pictures/%E8%B7%AF%E7%94%B1%E6%98%AF%E4%B8%80%E5%A5%97%E8%A7%84%E5%88%992.png"
                     
                ></p>
<p><strong>模拟实现单页面</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ReactDOM</span> <span class="keyword">from</span> <span class="string">&#x27;react-dom&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Home</span> <span class="keyword">from</span> <span class="string">&#x27;./pages/Home&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Friend</span> <span class="keyword">from</span> <span class="string">&#x27;./pages/Friend&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">My</span> <span class="keyword">from</span> <span class="string">&#x27;./pages/My&#x27;</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.PureComponent</span> &#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    <span class="attr">currentHash</span>:<span class="string">&#x27;&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//hashchange事件：锚点值(hash)值改变触发</span></span><br><span class="line">  <span class="comment">//当componentDidMount()页面渲染好了，就可以注册事件</span></span><br><span class="line">  <span class="title function_">componentDidMount</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">//注册事件</span></span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;hashchange&#x27;</span>,<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;hash值变了&#x27;</span>,<span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">hash</span>)</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;<span class="attr">currentHash</span>: <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">hash</span>.<span class="title function_">slice</span>(<span class="number">1</span>)&#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span>&#123;currentHash&#125; = <span class="variable language_">this</span>.<span class="property">state</span></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">h1</span>&gt;</span>App组件<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#/home&quot;</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#/my&quot;</span>&gt;</span>我的音乐<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#/friend&quot;</span>&gt;</span>我的朋友<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        //如果currentHash === &#x27;/home&#x27; 则渲染 <span class="tag">&lt;<span class="name">Home</span>&gt;</span><span class="tag">&lt;/<span class="name">Home</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          &#123;currentHash === &#x27;/home&#x27; &amp;&amp; <span class="tag">&lt;<span class="name">Home</span>&gt;</span><span class="tag">&lt;/<span class="name">Home</span>&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml">          &#123;currentHash === &#x27;/my&#x27; &amp;&amp; <span class="tag">&lt;<span class="name">My</span>&gt;</span><span class="tag">&lt;/<span class="name">My</span>&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml">          &#123;currentHash === &#x27;/friend&#x27; &amp;&amp; <span class="tag">&lt;<span class="name">Friend</span>&gt;</span><span class="tag">&lt;/<span class="name">Friend</span>&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml">          </span></span><br><span class="line"><span class="language-xml">          </span></span><br><span class="line"><span class="language-xml">          </span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">App</span>&gt;</span><span class="tag">&lt;/<span class="name">App</span>&gt;</span></span>, <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>))</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="10-3路由的基本使用"><a href="#10-3路由的基本使用" class="headerlink" title="10.3路由的基本使用"></a>10.3路由的基本使用</h2><p><a class="link"   target="_blank" rel="noopener" href="https://reactrouter.com/" >https://reactrouter.com<i class="fas fa-external-link-alt"></i></a></p>
<p>针对<strong>react-router5</strong>的版本</p>
<ol>
<li><strong>安装react-router-dom</strong></li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add react-router-dom</span><br></pre></td></tr></table></figure>
<ol start="2">
<li><strong>导入<code>react-router-dom</code>提供的 <code>HashRouter</code>, <code>Route</code>, <code>Link</code></strong></li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">HashRouter</span>, <span class="title class_">Route</span>, <span class="title class_">Link</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li><strong>使用<code>HashRouter</code>包裹整个应用</strong></li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">Router</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;App&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    // … 省略页面内容</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/<span class="title class_">Router</span>&gt;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>使用<code>Link</code>替换<code>a</code>链接，指定导航链接</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">Link</span> to=<span class="string">&quot;/first&quot;</span>&gt;页面一&lt;/<span class="title class_">Link</span>&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&quot;/two&quot;</span>&gt;</span>页面二<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<ol start="5">
<li>使用<code>Route</code>指定路由规则</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在哪里写的Route,最终匹配到的组件就会渲染到这</span></span><br><span class="line">&lt;<span class="title class_">Route</span> path=<span class="string">&quot;/first&quot;</span> component=&#123;<span class="title class_">First</span>&#125;&gt;&lt;/<span class="title class_">Route</span>&gt;</span><br></pre></td></tr></table></figure>

<h3 id="10-3-1详细说明"><a href="#10-3-1详细说明" class="headerlink" title="10.3.1详细说明"></a>10.3.1详细说明</h3><ul>
<li>Router 组件：包裹整个应用，一个 React 应用只需要使用一次</li>
<li>两种常用 Router：<code>HashRouter</code> 和 <code>BrowserRouter</code>  </li>
<li>HashRouter：使用 URL 的哈希值实现（<a class="link"   target="_blank" rel="noopener" href="http://localhost:3000/#/first%EF%BC%89" >http://localhost:3000/#/first）<i class="fas fa-external-link-alt"></i></a><ul>
<li>原理：监听 window 的 <code>hashchange</code> 事件来实现的</li>
</ul>
</li>
<li>（推荐）BrowserRouter：使用 H5 的 history API 实现（<a class="link"   target="_blank" rel="noopener" href="http://localhost:3000/first%EF%BC%89" >http://localhost:3000/first）<i class="fas fa-external-link-alt"></i></a><ul>
<li>原理：监听 window 的 <code>popstate</code> 事件来实现的</li>
</ul>
</li>
</ul>
<p>**地址栏要<code>#</code>就用<code>HashRouter</code>，不要<code>#</code>就用<code>BrowserRouter</code></p>
<p><strong>可以在导入的时候重命名</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">HashRouter</span> <span class="keyword">as</span> <span class="title class_">Router</span>, <span class="title class_">Route</span>, <span class="title class_">Link</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="10-3-2路由的执行过程"><a href="#10-3-2路由的执行过程" class="headerlink" title="10.3.2路由的执行过程"></a>10.3.2路由的执行过程</h3><ol>
<li>点击 Link 组件（a标签），修改了浏览器地址栏中的 url</li>
<li>React 路由监听到地址栏 url 的变化  (hashChange&#x2F; popState)</li>
<li>React 路由内部遍历所有 Route 组件，使用路由规则（path）与 pathname（hash）进行匹配</li>
<li>当路由规则（path）能够匹配地址栏中的 pathname（hash） 时，就展示该 Route 组件的内容</li>
</ol>
<h2 id="10-4Link与NavLink"><a href="#10-4Link与NavLink" class="headerlink" title="10.4Link与NavLink"></a>10.4Link与NavLink</h2><p><code>Link</code>组件最终会渲染成a标签，用于指定路由导航</p>
<ul>
<li>to属性，将来会渲染成a标签的href属性</li>
<li>但是<code>Link</code>组件无法实现导航的高亮效果</li>
</ul>
<p><code>NavLink</code>组件，一个更特殊的<code>Link</code>组件，可以用用于指定当前导航高亮</p>
<ul>
<li>点击Navlink之后当前点击的链接会自动添加一个类名为active，css中给active类设置样式</li>
</ul>
<ul>
<li>to属性，用于指定地址，会渲染成a标签的href属性</li>
<li>activeClass: 用于指定高亮的类名，默认<code>active</code>,如下设置成aa后，在css中aa类设置样式</li>
<li>exact: 精确匹配，表示必须精确匹配类名才生效。有时为了简便，首页就是一个<code>/</code>，模糊匹配时点别的也会高亮，用精确匹配就不会</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">NavLink</span> to=<span class="string">&quot;/friend&quot;</span> activeClass=<span class="string">&quot;aa&quot;</span> exact&gt;我的朋友&lt;/<span class="title class_">NavLink</span>&gt;</span><br></pre></td></tr></table></figure>

<h2 id="10-5Route"><a href="#10-5Route" class="headerlink" title="10.5Route"></a>10.5Route</h2><ul>
<li>path 的说明<ul>
<li>如果path指定为<code>/</code>，所有<code>/</code>开头的都可以被匹配</li>
<li>如果 path 的路径匹配上了，那么就可以对应的组件就会被 render。如果 path 没有匹配上，那么会 render null</li>
<li>如果path不写，能够匹配所有的匹配，一定会被渲染</li>
</ul>
</li>
<li>exact 的说明， exact 表示<strong>精确匹配</strong>某个路径<ul>
<li><strong>一般来说，如果路径配置了 &#x2F;， 都需要配置 exact 属性</strong></li>
</ul>
</li>
</ul>
<h2 id="10-6Switch与404错误提示页面"><a href="#10-6Switch与404错误提示页面" class="headerlink" title="10.6Switch与404错误提示页面"></a>10.6Switch与404错误提示页面</h2><ul>
<li><strong>Switch作用：</strong>如果将来能够匹配到多个路由规则，只会让第一个渲染出来</li>
</ul>
<ul>
<li><p>通常，我们会把<code>Route</code>包裹在一个<code>Switch</code>组件中</p>
</li>
<li><p>通过<code>Switch</code>组件非常容易的就能实现404错误页面的提示（写个404页面放在最后一个Route,不写path）</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">Switch</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">Route</span> <span class="attr">exact</span> <span class="attr">path</span>=<span class="string">&quot;/&quot;</span> <span class="attr">component</span>=<span class="string">&#123;Home&#125;/</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;/about&quot;</span> <span class="attr">component</span>=<span class="string">&#123;About&#125;/</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;/user&quot;</span> <span class="attr">component</span>=<span class="string">&#123;User&#125;/</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">Route</span> <span class="attr">component</span>=<span class="string">&#123;NoMatch&#125;/</span>&gt;</span></span></span><br><span class="line">&lt;/<span class="title class_">Switch</span>&gt;</span><br></pre></td></tr></table></figure>

<h2 id="10-7嵌套路由的配置"><a href="#10-7嵌套路由的配置" class="headerlink" title="10.7嵌套路由的配置"></a>10.7嵌套路由的配置</h2><ul>
<li>在React中，配置嵌套路由非常的简单，因为<code>Route</code>就是一个组件，可以在任意想配置的地方进行配置</li>
<li>在组件中依旧可以使用<code>Link</code>指定子路由的链接，<code>Route</code>指定子路由的规则，不用再使用<code>Router</code>组件</li>
<li>但是配置嵌套路由的时候，二级路由的path必须包含一级路由，必须要<strong>先匹配到父级路由，才能匹配到子路由</strong></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 通过/home可以匹配Home父组件  再通过/list匹配子组件</span></span><br><span class="line">&lt;<span class="title class_">Route</span> path=<span class="string">&quot;/home/list&quot;</span> component=&#123;<span class="title class_">List</span>&#125; /&gt;</span><br></pre></td></tr></table></figure>

<h2 id="10-8Redirect重定向"><a href="#10-8Redirect重定向" class="headerlink" title="10.8Redirect重定向"></a>10.8Redirect重定向</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">Redirect</span> exact <span class="keyword">from</span>=<span class="string">&#x27;/&#x27;</span> to=<span class="string">&#x27;/home&#x27;</span>&gt;&lt;/<span class="title class_">Redirect</span>&gt;</span><br></pre></td></tr></table></figure>

<p>如果地址是&#x2F;，需要重定向直接跳到&#x2F;home去，注意：一旦用到&#x2F;，要用exact</p>
<h2 id="10-9编程式导航"><a href="#10-9编程式导航" class="headerlink" title="10.9编程式导航"></a>10.9编程式导航</h2><ul>
<li>场景：点击登录按钮，登录成功后，通过代码跳转到后台首页</li>
<li>编程式导航：通过 JS 代码来实现页面跳转</li>
<li>history 是 React 路由提供的，用于获取浏览器历史记录的相关信息，通过prop获取history这个对象</li>
<li>push(path)：跳转到某个页面，参数 path 表示要跳转的路径</li>
<li>go(n)： 前进或后退到某个页面，参数 n 表示前进或后退页面数量（比如：-1 表示后退到上一页）</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Login</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">    handleLogin = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">history</span>.<span class="title function_">push</span>(<span class="string">&#x27;/home&#x27;</span>)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">history</span>.<span class="title function_">go</span>(-<span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;...省略其他代码&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="10-10动态路由与路由参数获取"><a href="#10-10动态路由与路由参数获取" class="headerlink" title="10.10动态路由与路由参数获取"></a>10.10动态路由与路由参数获取</h2><ul>
<li>可以使用<code>:id</code>的方式来配置动态的路由参数</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 可以匹配 /users/1  /users/2  /users/xxx</span></span><br><span class="line">&lt;<span class="title class_">Route</span> path=<span class="string">&quot;/users/:id&quot;</span> component=&#123;<span class="title class_">Users</span>&#125; /&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>在组件中，通过<code>props.match.params.id</code>可以接收到地址栏的id</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">match</span>.<span class="property">params</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="11-Ant-Design组件库"><a href="#11-Ant-Design组件库" class="headerlink" title="11.Ant Design组件库"></a>11.Ant Design组件库</h1><p>&#96;&#96;antd&#96; 是基于 Ant Design 设计体系的 React UI 组件库，主要用于研发企业级中后台产品。</p>
<ul>
<li><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install antd --save</span><br></pre></td></tr></table></figure>

<ul>
<li><h2 id="导入全局样式"><a href="#导入全局样式" class="headerlink" title="导入全局样式"></a>导入全局样式</h2></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;antd/dist/antd.css&#x27;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><h2 id="导入组件"><a href="#导入组件" class="headerlink" title="导入组件"></a>导入组件</h2></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">DatePicker</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">DatePicker</span> /&gt;</span></span>, mountNode</span><br></pre></td></tr></table></figure>

<h1 id="12-React组件复用"><a href="#12-React组件复用" class="headerlink" title="12. React组件复用"></a>12. React组件复用</h1><h2 id="12-1组件复用说明"><a href="#12-1组件复用说明" class="headerlink" title="12.1组件复用说明"></a>12.1组件复用说明</h2><p>​	如果两个组件中的部分功能相似或相同，复用相似的功能。<strong>把逻辑复用起来，但是组件渲染的内容不同。</strong></p>
<ul>
<li>三种解决方案<ul>
<li>render-props</li>
<li>HOC（高阶组件）</li>
<li>mixins(Vue还在使用，React已经<strong>废弃</strong>)</li>
</ul>
</li>
<li>注意：这两种方式不是新的API，而是利用React自身特点的编码技巧，演化而成的固定模式（写法）</li>
</ul>
<h2 id="12-2render-props使用"><a href="#12-2render-props使用" class="headerlink" title="12.2render-props使用"></a>12.2render-props使用</h2><p>需求：现在有一个App组件，在App组件中，需要渲染</p>
<ul>
<li>猫组件：跟着鼠标跑</li>
<li>位置组件：显示当前鼠标的位置</li>
</ul>
<p>	</p>
<p>此时，猫组件和位置组件的<strong>逻辑相同</strong>，我们定义一个新组件</p>
<ul>
<li>鼠标组件：<strong>用于提供逻辑</strong>。该组件将来可能用于渲染Cat组件和位置组件，所以渲染的是不确定的,所以render可以直接返回一个属性children。因为无论是猫组件还是位置组件无非用到鼠标组件的state，所以<code>this.state</code>作为参数传过去</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">props</span>.<span class="title function_">render</span>(<span class="variable language_">this</span>.<span class="property">state</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//鼠标组件</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; <span class="title class_">Component</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> <span class="title class_">index</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    <span class="attr">x</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">y</span>: <span class="number">0</span>,</span><br><span class="line">  &#125;</span><br><span class="line">  move = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">pageX</span>, e.<span class="property">pageY</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">      <span class="attr">x</span>: e.<span class="property">pageX</span>,</span><br><span class="line">      <span class="attr">y</span>: e.<span class="property">pageY</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">componentDidMount</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;mousemove&#x27;</span>, <span class="variable language_">this</span>.<span class="property">move</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">componentWillUnmount</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">removeEventListener</span>(<span class="string">&#x27;mousemove&#x27;</span>, <span class="variable language_">this</span>.<span class="property">move</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">props</span>.<span class="title function_">children</span>(<span class="variable language_">this</span>.<span class="property">state</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>因为鼠标组件需要一个children属性，所以在App组件传一个children进去，children为一个函数，该函数可以传一个Cat组件进去</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//APP组件</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span>  <span class="title class_">ReactDOM</span>  <span class="keyword">from</span> <span class="string">&quot;react-dom&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Cat</span> <span class="keyword">from</span> <span class="string">&#x27;./Cat&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Position</span> <span class="keyword">from</span> <span class="string">&#x27;./Position&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Mouse</span> <span class="keyword">from</span> <span class="string">&#x27;./Mouse&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        //解构一个x,y</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Mouse</span>&gt;</span>&#123;(&#123;x,y&#125;) =&gt; &#123;<span class="tag">&lt;<span class="name">Cat</span> <span class="attr">x</span>=<span class="string">&#123;x&#125;</span> <span class="attr">y</span>=<span class="string">&#123;y&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">Cat</span>&gt;</span>&#125;&#125;<span class="tag">&lt;/<span class="name">Mouse</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">App</span>&gt;</span><span class="tag">&lt;/<span class="name">App</span>&gt;</span></span>, <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>))</span><br></pre></td></tr></table></figure>

<p>Cat组件直接从this.props拿x和y</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; <span class="title class_">Component</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> <span class="title class_">Cat</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#123;img&#125;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> <span class="attr">style</span>=<span class="string">&#123;&#123;left:this.props.x,top:this.props.y&#125;&#125;</span> /&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">  &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="12-3高阶组件-HOC-higher-order-component"><a href="#12-3高阶组件-HOC-higher-order-component" class="headerlink" title="12.3高阶组件  HOC higher order component"></a>12.3高阶组件  HOC higher order component</h2><p>​	<strong>目的：</strong>实现状态逻辑复用   增强一个组件的能力。高阶组件就相当于手机壳，通过包装组件，增强组件功能</p>
<ul>
<li>高阶组件（HOC，Higher-Order Component）是一个函数，参数接收要包装的组件，返回增强的组件</li>
<li>高阶组件的命名： <code>withXXX</code>xxx表示一个能力</li>
<li>高阶组件内部创建一个类组件，在这个类组件中提供复用的状态逻辑代码，通过prop将复用的状态传递给<br>被包装组件</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//高阶组件，参数：接受一个普通的组件</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">withMouse</span>(<span class="params">Base</span>)&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Mouse</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>&#123;</span><br><span class="line">        <span class="comment">// 处理鼠标的位置等逻辑</span></span><br><span class="line">        <span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="language-xml">&lt;Base&#123;...this.state&#125;&gt;&lt;/BigBase&#123;...this.state&#125;&gt;</span></span><br><span class="line"><span class="language-xml">        &#125;</span></span><br><span class="line"><span class="language-xml">    &#125;</span></span><br><span class="line"><span class="language-xml">    return Mouse</span></span><br><span class="line"><span class="language-xml">&#125;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> withMouse <span class="keyword">from</span> <span class="string">&#x27;./withMouse&#x27;</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">CatWithMouse</span> = <span class="title function_">withMouse</span>(<span class="title class_">Cat</span>)</span><br><span class="line">&lt;<span class="title class_">CatWithMouse</span>&gt;<span class="language-xml"><span class="tag">&lt;<span class="name">CatWithMouse</span>/&gt;</span></span></span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>使用高阶组件可能出现props丢失的现象，因为高阶组件没有往下传递props</p>
<p><strong>解决方法：</strong>渲染 时，将 state 和 this.props 一起传递给组件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">Base</span> &#123;...<span class="variable language_">this</span>.<span class="property">state</span>&#125; &#123;...<span class="variable language_">this</span>.<span class="property">props</span>&#125; /&gt;</span><br></pre></td></tr></table></figure>

<h1 id="13-Hooks"><a href="#13-Hooks" class="headerlink" title="13.Hooks"></a>13.Hooks</h1><h2 id="13-1React-Hooks-介绍"><a href="#13-1React-Hooks-介绍" class="headerlink" title="13.1React Hooks 介绍"></a>13.1React Hooks 介绍</h2><h3 id="13-1-1Hooks-是什么"><a href="#13-1-1Hooks-是什么" class="headerlink" title="13.1.1Hooks 是什么"></a>13.1.1Hooks 是什么</h3><ul>
<li><code>Hooks</code>：钩子、钓钩、钩住；是 <strong>React v16.8</strong> 中的新增功能</li>
<li>作用：为<strong>函数组件</strong>提供<code>状态</code>、<code>生命周期</code>等原本 class 组件中提供的 React 功能 </li>
<li>注意：<strong>Hooks 只能在函数组件中使用</strong>，自此，函数组件成为 React 的新宠儿</li>
</ul>
<h3 id="13-1-2组件开发模式的对比"><a href="#13-1-2组件开发模式的对比" class="headerlink" title="13.1.2组件开发模式的对比"></a>13.1.2组件开发模式的对比</h3><ul>
<li>React v16.8 以前： class 组件(提供状态) + 函数组件(展示内容)</li>
<li>React v16.8 及其以后：<ol>
<li>class 组件(提供状态) + 函数组件(展示内容)</li>
<li>Hooks(提供状态) + 函数组件(展示内容)</li>
<li>混用以上两种方式：部分功能用 class 组件，部分功能用 Hooks+函数组件</li>
</ol>
</li>
</ul>
<p>注意1：虽然有了 Hooks，但 React 官方并没有计划从 React 库中移除 class。<br>注意2：有了 Hooks 以后，不能再把<strong>函数组件</strong>称为无状态组件了，因为 Hooks 为函数组件提供了状态。</p>
<h3 id="13-1-3为什么要有-Hooks"><a href="#13-1-3为什么要有-Hooks" class="headerlink" title="13.1.3为什么要有 Hooks"></a>13.1.3为什么要有 Hooks</h3><p>两个角度：1 组件的状态逻辑复用 2 class 组件自身的问题</p>
<ol>
<li>组件的状态逻辑复用：<ul>
<li>在 Hooks 之前，组件的状态逻辑复用经历了：mixins（混入）、HOCs（高阶组件）、render-props 等模式。</li>
<li>（早已废弃）mixins 的问题：1 数据来源不清晰 2 命名冲突。</li>
<li>HOCs、render-props 的问题：重构组件结构，导致组件形成 JSX 嵌套地狱问题。</li>
</ul>
</li>
<li>class 组件自身的问题：<ul>
<li>选择：函数组件和 class 组件之间的区别以及使用哪种组件更合适</li>
<li>需要理解 class 中的 this 是如何工作的</li>
<li>相互关联且需要对照修改的代码被拆分到不同生命周期函数中<ul>
<li>componentDidMount -&gt;  window.addEventListener(‘resize’, this.fn)</li>
<li>componentWillUnmount -&gt; window.addEventListener(‘resize’, this.fn)</li>
</ul>
</li>
</ul>
</li>
</ol>
<ul>
<li>相比于函数组件来说，不利于代码压缩和优化，也不利于 TS 的类型推导</li>
</ul>
<p>正是由于 React 原来存在的这些问题，才有了 Hooks 来解决这些问题</p>
<h3 id="13-1-4hooks的优势"><a href="#13-1-4hooks的优势" class="headerlink" title="13.1.4hooks的优势"></a>13.1.4hooks的优势</h3><p>由于原来 React 中存在的问题，促使 React 需要一个更好的自带机制来实现组件状态逻辑复用。</p>
<ol>
<li>Hooks 只能在函数组件中使用，避免使用class 组件的问题</li>
<li>复用组件状态逻辑，而<strong>无需更改组件层次结构</strong></li>
<li><strong>根据功能</strong>而<strong>不是基于生命周期</strong>方法强制进行代码分割</li>
<li>抛开 React 赋予的概念来说，Hooks 就是一些普通的函数</li>
<li>具有更好的 TS  类型推导</li>
<li>tree- - shaking  友 好，打包时去掉未引用的代码</li>
<li>更好的压缩</li>
</ol>
<p>项目开发中，<strong>Hooks 的采用策略：</strong></p>
<ul>
<li>不推荐直接使用 Hooks 大规模重构现有组件</li>
<li>推荐：新功能用 Hooks，复杂功能实现不了的，也可以继续用 class</li>
<li>找一个功能简单、非核心功能的组件开始使用 hooks</li>
</ul>
<h3 id="13-1-5前面的-React-知识是有用的"><a href="#13-1-5前面的-React-知识是有用的" class="headerlink" title="13.1.5前面的 React 知识是有用的"></a>13.1.5前面的 React 知识是有用的</h3><p>class 组件相关的 API 不用了，比如：</p>
<ul>
<li><code>class Hello extends Component</code></li>
<li><code>componentDidMount</code>、<code>componentDidUpdate</code>、<code>componentWillUnmount</code></li>
<li><code>this</code> 相关的用法</li>
</ul>
<p>原来学习的内容还是要用的，比如：</p>
<ul>
<li>JSX：<code>&#123;&#125;</code>、<code>onClick=&#123;handleClick&#125;</code>、条件渲染、列表渲染、样式处理等</li>
<li>组件：函数组件、组件通讯</li>
<li>路由</li>
<li>React 开发理念：<code>单向数据流</code>、<code>状态提升</code> 等</li>
<li>解决问题的思路、技巧、常见错误的分析等上</li>
</ul>
<h2 id="13-2useState-Hook"><a href="#13-2useState-Hook" class="headerlink" title="13.2useState Hook"></a>13.2useState Hook</h2><h3 id="13-2-1useState-Hook-的基本使用"><a href="#13-2-1useState-Hook-的基本使用" class="headerlink" title="13.2.1useState Hook 的基本使用"></a>13.2.1useState Hook 的基本使用</h3><ul>
<li>使用场景：当你想要在<strong>函数组件中，使用组件状态时</strong>，就要使用 <code>useState</code> Hook 了</li>
<li>作用：为函数组件提供状态（state）</li>
<li>使用步骤：<ol>
<li>导入 <code>useState</code> 函数</li>
<li>调用 <code>useState</code> 函数，并传入状态的初始值</li>
<li>从 <code>useState</code> 函数的返回值中，拿到状态和修改状态的函数</li>
<li>在 JSX 中展示状态</li>
<li>在按钮的点击事件中调用修改状态的函数，来更新状态</li>
</ol>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.导入 `useState` 函数</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> ,&#123;useState&#125;<span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ReactDOM</span> <span class="keyword">from</span> <span class="string">&#x27;react-dom&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span> ()&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.调用 `useState` 函数，并传入状态的初始值</span></span><br><span class="line">    <span class="comment">//useState()参数，意思是初始值</span></span><br><span class="line">    <span class="comment">//返回值：是一个数组，长度为2</span></span><br><span class="line">    <span class="comment">//下标0：就是这个状态</span></span><br><span class="line">    <span class="comment">//下标1：修改这个状态的函数</span></span><br><span class="line"><span class="comment">//3.从 `useState` 函数的返回值中，拿到状态和修改状态的函数</span></span><br><span class="line">    <span class="keyword">const</span> [count,setCount] = <span class="title function_">useState</span>(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">return</span>(</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">h3</span>&gt;</span>我是根组件<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span>&gt;</span>我点击了&#123;count&#125;次<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">//4.在按钮的点击事件中调用修改状态的函数，来更新状态</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setCount(count + 1)&#125;&gt;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">App</span>&gt;</span><span class="tag">&lt;/<span class="name">App</span>&gt;</span></span>,<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>))</span><br></pre></td></tr></table></figure>

<ul>
<li><p>参数：<strong>状态初始值</strong>。比如，传入 0 表示该状态的初始值为 0</p>
<ul>
<li>注意：此处的状态可以是任意值（比如，数值、字符串等），而 class 组件中的 state 必须是对象</li>
</ul>
</li>
<li><p>返回值：数组，包含两个值：1 状态值（state） 2 修改该状态的函数（setState）</p>
</li>
<li><p>使用数组解构简化 <code>useState</code> 的使用</p>
<ul>
<li>约定：<strong>修改状态的函数名称以 set 开头，后面跟上状态的名称</strong></li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 解构出来的名称可以是任意名称</span></span><br><span class="line"><span class="keyword">const</span> [state, setState] = <span class="title function_">useState</span>(<span class="number">0</span>)</span><br><span class="line"><span class="keyword">const</span> [age, setAge] = <span class="title function_">useState</span>(<span class="number">0</span>)</span><br><span class="line"><span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>)</span><br></pre></td></tr></table></figure>

<h3 id="13-2-2状态的读取和修改"><a href="#13-2-2状态的读取和修改" class="headerlink" title="13.2.2状态的读取和修改"></a>13.2.2状态的读取和修改</h3><p>状态的使用：1 读取状态 2 修改状态</p>
<ol>
<li>读取状态：该方式提供的状态，是函数内部的局部变量，可以在函数内的任意位置使用</li>
<li>修改状态：</li>
</ol>
<ul>
<li><code>setCount(newValue)</code> 是一个函数，参数表示：<strong>新的状态值</strong></li>
<li>调用该函数后，将<strong>使用新的状态值<code>替换</code>旧值</strong></li>
<li>修改状态后，因为状态发生了改变，所以，该组件会重新渲染</li>
</ul>
<h3 id="13-2-3组件的更新过程"><a href="#13-2-3组件的更新过程" class="headerlink" title="13.2.3组件的更新过程"></a>13.2.3组件的更新过程</h3><p>函数组件使用 <strong>useState</strong> hook 后的执行过程，以及状态值的变化： </p>
<ul>
<li>组件第一次渲染：<ol>
<li>从头开始执行该组件中的代码逻辑</li>
<li>调用 <code>useState(0)</code> 将传入的参数作为状态初始值，即：0</li>
<li>渲染组件，此时，获取到的状态 count 值为： 0</li>
</ol>
</li>
<li>组件第二次渲染：<ol>
<li>点击按钮，调用 <code>setCount(count + 1)</code> 修改状态，因为状态发生改变，所以，该组件会重新渲染</li>
<li>组件重新渲染时，会再次执行该组件中的代码逻辑</li>
<li>再次调用 <code>useState(0)</code>，此时 <strong>React 内部会拿到最新的状态值而非初始值</strong>，比如，该案例中最新的状态值为 1</li>
<li>再次渲染组件，此时，获取到的状态 count 值为：1</li>
</ol>
</li>
</ul>
<p>注意：<strong>useState 的初始值(参数)只会在组件第一次渲染时生效</strong>。 </p>
<p>也就是说，以后的每次渲染，useState 获取到都是最新的状态值。React 组件会记住每次最新的状态值!</p>
<h3 id="12-3-4为函数组件添加多个状态"><a href="#12-3-4为函数组件添加多个状态" class="headerlink" title="12.3.4为函数组件添加多个状态"></a>12.3.4为函数组件添加多个状态</h3><p>问题：如果一个函数组件需要多个状态，该如何处理?<br>回答：调用 <code>useState</code> Hook 多次即可，每调用一次 useState Hook 可以提供一个状态。<br>注意：useState Hook 多次调用返回的 [state, setState] 相互之间，互不影响。</p>
<h3 id="12-3-5hooks-的使用规则"><a href="#12-3-5hooks-的使用规则" class="headerlink" title="12.3.5hooks 的使用规则"></a>12.3.5hooks 的使用规则</h3><p>注意：<strong>React Hooks 只能直接出现在 函数组件 中，不能嵌套在 if&#x2F;for&#x2F;其他函数中</strong>！</p>
<p>否则就会报错：React Hook “useState” is called conditionally. React Hooks must be called in the exact same order in every component render</p>
<p>React 的 useState 这个 Hook 被条件性（放在一个条件判断中）的调用了。</p>
<p>React Hooks 必须要每次组件渲染时，按照<strong>相同的顺序</strong>来调用所有的 Hooks。</p>
<ul>
<li>为什么会有这样的规则？ 因为 React 是按照 Hooks 的调用顺序来识别每一个 Hook，如果每次调用的顺序不同，导致 React 无法知道是哪一个 Hook</li>
</ul>
<h2 id="13-3useEffect-Hook"><a href="#13-3useEffect-Hook" class="headerlink" title="13.3useEffect Hook"></a>13.3useEffect Hook</h2><h3 id="13-3-1side-effect-副作用"><a href="#13-3-1side-effect-副作用" class="headerlink" title="13.3.1side effect - 副作用"></a>13.3.1side effect - 副作用</h3><p>使用场景：当你想要在函数组件中，<strong>处理副作用（side effect）时</strong>，就要使用 <code>useEffect</code> Hook 了<br>作用：<strong>处理函数组件中的副作用（side effect）</strong></p>
<p>问题：副作用（side effect）是什么?<br>回答：在计算机科学中，如果一个函数或其他操作修改了其局部环境之外的状态变量值，那么它就被称为有副作用。副作用是相对于主作用来说的，一个功能（比如，函数）除了主作用，其他的作用就是副作用<br>对于 React 组件来说，<strong>主作用就是根据数据（state&#x2F;props）渲染 UI</strong>，除此之外都是副作用（比如，手动修改 DOM）**</p>
<p><strong>常见的副作用（side effect）</strong></p>
<ul>
<li>数据（Ajax）请求、手动修改 DOM、localStorage 操作等</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 不带副作用的情况：</span></span><br><span class="line"><span class="comment">// 该函数的（主）作用：计算两个数的和</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 带副作用的情况：</span></span><br><span class="line"><span class="keyword">let</span> c = <span class="number">1</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">  <span class="comment">// 因为此处修改函数外部的变量值，而这一点不是该函数的主作用，因此，就是：side effect（副作用）</span></span><br><span class="line">  c = <span class="number">2</span></span><br><span class="line">  <span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 带副作用的情况：</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">  <span class="comment">// 因为 console.log 会导致控制台打印内容，所以，也是对外部产生影响，所以，也是：副作用</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(a)</span><br><span class="line">  <span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 没有副作用：</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> obj.<span class="property">name</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 有副作用：</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">  <span class="comment">// 此处直接修改了参数的值，也是一个副作用</span></span><br><span class="line">  obj.<span class="property">name</span> = <span class="string">&#x27;啊&#x27;</span></span><br><span class="line">  <span class="keyword">return</span> obj.<span class="property">name</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> o = &#123; <span class="attr">name</span>: <span class="string">&#x27;啊&#x27;</span> &#125;</span><br><span class="line"><span class="title function_">fn</span>(o)</span><br></pre></td></tr></table></figure>

<h3 id="13-3-2useEffect-的基本使用"><a href="#13-3-2useEffect-的基本使用" class="headerlink" title="13.3.2useEffect 的基本使用"></a>13.3.2useEffect 的基本使用</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="comment">//useEffect的参数是一个函数，</span></span><br><span class="line"><span class="comment">//这个函数会在组件渲染好的时候执行(componentDidMount + componentDidUpdate)</span></span><br><span class="line"><span class="comment">//就是在这个函数中写副作用的代码</span></span><br><span class="line"><span class="title function_">useEffect</span>(<span class="keyword">function</span> <span class="title function_">effect</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="property">title</span> = <span class="string">`当前已点击 <span class="subst">$&#123;count&#125;</span> 次`</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="property">title</span> = <span class="string">`当前已点击 <span class="subst">$&#123;count&#125;</span> 次`</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>解释：</p>
<ul>
<li>参数：回调函数（称为 <strong>effect</strong>），就是<strong>在该函数中写副作用代码</strong></li>
<li>执行时机：该 effect 会在每次组件更新（DOM更新）后执行，等价于两个钩子函数(componentDidMount + componentDidUpdate)</li>
</ul>
<h3 id="13-3-3useEffect-的依赖"><a href="#13-3-3useEffect-的依赖" class="headerlink" title="13.3.3useEffect 的依赖"></a>13.3.3useEffect 的依赖</h3><ul>
<li>问题：如果组件中有另外一个状态，另一个状态更新时，刚刚的 effect 回调，也会执行 </li>
<li>性能优化：<strong>跳过不必要的执行，只在 count 变化时，才执行相应的 effect</strong></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="property">title</span> = <span class="string">`当前已点击 <span class="subst">$&#123;count&#125;</span> 次`</span></span><br><span class="line">&#125;, [count])</span><br></pre></td></tr></table></figure>

<p>解释：</p>
<ul>
<li>第二个参数：可选的，可省略；也可以传一个数组，数组中的元素可以成为<strong>依赖项（deps）</strong> </li>
<li>该示例中表示：只有当 count 改变时，才会重新执行该 effect</li>
</ul>
<p>当<code>useEffect</code> 的<strong>依赖</strong>是一个<strong>空数组</strong>时，表示只在组件第一次渲染后执行 effect，因为空数组是不会发生变化的。<br>使用场景：1 事件绑定 2 发送请求获取数据 等</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleResize</span> = (<span class="params"></span>) =&gt; &#123;&#125;</span><br><span class="line">  <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;resize&#x27;</span>, handleResize)</span><br><span class="line">&#125;, [])</span><br></pre></td></tr></table></figure>

<p>解释：</p>
<ul>
<li>该 effect 只会在组件第一次渲染后执行，因此，可以执行像事件绑定等只需要执行一次的操作<ul>
<li>此时，相当于 class 组件的 componentDidMount 钩子函数的作用</li>
</ul>
</li>
<li>跟 useState Hook 一样，一个组件中也可以调用 useEffect Hook 多次 </li>
<li>推荐：一个 useEffect  只处理一个功能，有多个功能时，使用多次 useEffect</li>
</ul>
<p><strong>注意：如果<code>useEffect</code>的函数使用到了某个依赖项，必须要在第二个参数中填写该依赖</strong></p>
<p><strong>总结：</strong> useEffect 的使用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 触发时机：1 第一次渲染会执行 2 每次组件重新渲染都会再次执行</span></span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 触发时机：只在组件第一次渲染时执行</span></span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;&#125;, [])</span><br><span class="line"></span><br><span class="line"><span class="comment">// 触发时机：1 第一次渲染会执行 2 当 count or money 变化时会再次执行</span></span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;&#125;, [count，money])</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="13-3-4useEffect-清理组件副作用"><a href="#13-3-4useEffect-清理组件副作用" class="headerlink" title="13.3.4useEffect 清理组件副作用"></a>13.3.4useEffect 清理组件副作用</h3><p>问题：如何在组件卸载时，解绑事件？此时，就用到 effect 的返回值了</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleResize</span> = (<span class="params"></span>) =&gt; &#123;&#125;</span><br><span class="line">  <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;resize&#x27;</span>, handleResize)</span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> <span class="variable language_">window</span>.<span class="title function_">removeEventListener</span>(<span class="string">&#x27;resize&#x27;</span>, handleResize)</span><br><span class="line">&#125;, [])</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>解释：</p>
<ul>
<li>effect 的返回值也是可选的，可省略。也可以返回一个清理函数，用来执行事件解绑等清理操作</li>
<li>清理函数的执行时机：1【空数组没有依赖】组件卸载时 2 【有依赖项】effect 重新执行前（暂时知道即可） <ul>
<li>此时，相当于 class 组件的 componentWillUnmount 钩子函数的作用</li>
</ul>
</li>
<li>推荐：一个 useEffect 只处理一个功能，有多个功能时，使用多次 useEffect </li>
<li>优势：根据业务逻辑来拆分，相同功能的业务逻辑放在一起，而不是根据生命周期方法名称来拆分代码</li>
</ul>
<h3 id="13-3-5useEffect-发送请求"><a href="#13-3-5useEffect-发送请求" class="headerlink" title="13.3.5useEffect 发送请求"></a>13.3.5useEffect 发送请求</h3><p>在组件中，使用 useEffect Hook 发送请求获取数据（side effect）：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">const</span> [list,setList] = <span class="title function_">useState</span>([])</span><br><span class="line">    <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> <span class="title function_">getList</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">            <span class="keyword">const</span> res = <span class="keyword">await</span> axios.<span class="title function_">get</span>(<span class="string">&#x27;http://....&#x27;</span>)</span><br><span class="line">            <span class="title function_">setList</span>(res.<span class="property">data</span>.<span class="property">channels</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="title function_">getList</span>()</span><br><span class="line">    &#125;,[])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>解释：</p>
<ul>
<li>注意：<strong>effect 只能是一个同步函数，不能使用 async</strong></li>
<li>因为 effect 的返回值应该是一个清理函数，React 会在组件卸载或者 effect 的依赖项变化时重新执行 </li>
<li>但如果 effect 是 async 的，此时返回值是 Promise 对象。这样的话，就无法保证清理函数被立即调用</li>
<li>如果延迟调用清理函数，也就没有机会忽略过时的请求结果或取消请求</li>
<li><strong>为了使用 async&#x2F;await 语法，可以在 effect 内部创建 async 函数，并调用</strong></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 错误演示：</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 不要给 effect 添加 async</span></span><br><span class="line"><span class="title function_">useEffect</span>(<span class="keyword">async</span> () =&gt; &#123;&#125;, [])</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="13-4函数组件的特性、问题"><a href="#13-4函数组件的特性、问题" class="headerlink" title="13.4函数组件的特性、问题"></a>13.4函数组件的特性、问题</h2><p>函数组件的特性说明：</p>
<ul>
<li>对于函数组件来说，每次状态更新后，组件都会重新渲染。并且，<strong>每次组件更新都像是在给组件拍照。每张照片就代表组件在某个特定时刻的状态。</strong>或者说：<code>组件的每次特定渲染，都有自己的 props/state/事件处理程序</code> 等。这些照片记录的状态，从代码层面来说，是通过 JS 中函数的闭包机制来实现的。</li>
</ul>
<p>问题：</p>
<ul>
<li>组件每次重新渲染时，<em>组件内部的事件处理程序等函数都会重新创建，导致子组件每次都会接收到不同的 props，从而重复进行不必要的渲染（性能问题）</em>。我们使用 <code>React.memo</code> 配合 <code>useCallback/useMemo</code>  来解决</li>
<li>组件内的事件处理程序等函数中，只能获取到那一次特定渲染时的数据，这是合理的（闭包的原因）。使用 <code>useRef Hook</code> 来解决</li>
</ul>
<h2 id="13-5React-memo高阶组件"><a href="#13-5React-memo高阶组件" class="headerlink" title="13.5React.memo高阶组件"></a>13.5React.memo高阶组件</h2><h3 id="13-5-1React-memo-高阶组件的使用场景说明："><a href="#13-5-1React-memo-高阶组件的使用场景说明：" class="headerlink" title="13.5.1React.memo 高阶组件的使用场景说明："></a>13.5.1React.memo 高阶组件的使用场景说明：</h3><p>React 组件更新机制：只要父组件状态更新，子组件就会无条件的一起更新。</p>
<ul>
<li>子组件 props 变化时更新过程：组件代码执行 -&gt; JSX Diff（配合虚拟 DOM）-&gt; 渲染（变化后的内容）【 DOM 操作】。</li>
<li>子组件 props 无变化更新过程：组件代码执行 -&gt; JSX Diff（配合虚拟 DOM）【无 DOM 操作】。</li>
</ul>
<p>注意：此处更新指的是组件代码执行、JSX 进行 Diff 操作（纯 JS 的操作，速度非常快，不会对性能产生太多影响）。</p>
<ul>
<li>如果组件 props 改变了，那么，该组件就必须要更新，才能接收到最新的 props。</li>
<li>但是，如果组件 props 没有改变时，组件也要进行一次更新。实际上，这一次更新是没有必要的。</li>
</ul>
<p>如果要避免组件 props 没有变化而进行的不必要更新（Diff），这种情况下，就要使用 React.memo 高阶组件。</p>
<h3 id="13-5-2语法"><a href="#13-5-2语法" class="headerlink" title="13.5.2语法"></a>13.5.2语法</h3><p>使用场景：当你想要避免函数组件 props 没有变化而产生的不必要更新时，就要用到 React.memo 了。</p>
<p>作用：<strong>记忆组件上一次的渲染结果，在 props 没有变化时复用该结果，避免函数组件不必要的更新</strong>。</p>
<p>解释：</p>
<ul>
<li>React.memo 是一个高阶组件，用来记忆（memorize）组件。</li>
<li>参数（Child）：需要被记忆的组件，或者说是需要避免不必要更新的组件。</li>
<li>返回值（MemoChild）：React 记住的 Child 组件。</li>
</ul>
<p>原理：通过对比检查更新前后 props 是否相同，来决定是否复用上一次的渲染结果，</p>
<ul>
<li>如果相同，复用上一次的渲染结果；</li>
<li>如果不同，重新渲染组件。</li>
</ul>
<p><strong>并不是所有的组件都适合使用memo，比如child2组件，每次都需要重新渲染，使用memo反而会使性能变得更低，逻辑也变得更复杂</strong></p>
<h3 id="13-5-3浅层对比"><a href="#13-5-3浅层对比" class="headerlink" title="13.5.3浅层对比"></a>13.5.3浅层对比</h3><p>默认情况下，React.memo 只会对更新前后的 props 进行浅对比（shallow compare）与 PureComponent 相同。</p>
<p>也就是说，对于对象类型的 prop 来说，只会比较引用</p>
<ul>
<li>如果更新前后的引用相同，复用上一次的渲染结果（不会重新渲染该组件）。</li>
<li>如果更新前后的引用不同，重新渲染该组件。</li>
</ul>
<p>如果你要手动控制比较过程，可以使用 React.memo 的第二个参数</p>
<p>解释：</p>
<ul>
<li>第二个参数：用来比较更新前后 props 的函数。</li>
<li>返回值：如果返回 true，表示记住（不重新渲染）该组件；如果返回 false，表示重新渲染该组件。</li>
</ul>
<h2 id="13-6useCallback"><a href="#13-6useCallback" class="headerlink" title="13.6useCallback"></a>13.6useCallback</h2><h3 id="13-6-1使用场景"><a href="#13-6-1使用场景" class="headerlink" title="13.6.1使用场景"></a>13.6.1使用场景</h3><p>在使用 React.memo 时，对于对象类型的 props，只会比较引用（浅对比）。</p>
<p>但是，因为<strong>组件每次更新都会创建新的 props 值</strong>，比如，新的对象、事件处理程序等（函数组件的特性）。</p>
<p>这就导致：React.memo 在处理对象类型的 props 时，会失效（每次的 props 都是新对象）。</p>
<p>但是，我们还是想让 React.memo 在处理对象类型的 props 时，也有效。</p>
<p>为了让 React.memo 处理对象类型的 props 有效，只要在<em>组件更新期间保持对象类型引用相</em>等，就可以了。</p>
<p>这时候，就要用到以下两个 Hooks：</p>
<ul>
<li><code>useCallback</code> Hook：记住函数的引用，在组件每次更新时返回相同引用的函数。</li>
<li><code>useMemo</code> Hook：记住任意数据（数值、对象、函数等），在组件每次更新时返回相同引用的数据【功能之一】</li>
</ul>
<h3 id="13-6-2基本使用"><a href="#13-6-2基本使用" class="headerlink" title="13.6.2基本使用"></a>13.6.2基本使用</h3><p>使用场景：在使用 React.memo 时，为了组件每次更新时都能获取到相同引用的函数，就要用到 useCallback Hook</p>
<p>注意：<strong>需要配合 React.memo 高阶函数一起使用</strong>。</p>
<p>作用：记忆传入的回调函数，这个被记住的回调函数会一直生效，直到依赖项发生改变</p>
<p>解释：</p>
<ul>
<li>第一个参数：必选，需要被记忆的回调函数。</li>
<li>第二个参数：必选，依赖项数组，用于指定回调函数中依赖（用到）的数据（类似于 useEffect 的第二个参数）。</li>
<li>即使没有依赖，也得传入空数组（[]），此时，useCallback 记住的回调函数就会一直生效。</li>
<li>返回值：useCallback 记住的回调函数。</li>
<li>useCallback 记住的回调函数会一直生效（或者说会一直返回同一个回调函数），直到依赖项发生改变。</li>
</ul>

        </div>

        

        
            <ul class="post-tags-box">
                
                    <li class="tag-item">
                        <a href="/tags/React/">#React</a>&nbsp;
                    </li>
                
            </ul>
        

        
            <div class="article-nav">
                
                    <div class="article-prev">
                        <a class="prev"
                           rel="prev"
                           href="/2022/08/11/10.%E2%80%9D%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BA%E2%80%9CMySQL/"
                        >
                            <span class="left arrow-icon flex-center">
                              <i class="fas fa-chevron-left"></i>
                            </span>
                            <span class="title flex-center">
                                <span class="post-nav-title-item">10.和小达一起学MySQL</span>
                                <span class="post-nav-item">Prev posts</span>
                            </span>
                        </a>
                    </div>
                
                
                    <div class="article-next">
                        <a class="next"
                           rel="next"
                           href="/2022/08/11/13.%E2%80%9D%E7%8E%A9%E8%BD%AC%E2%80%9CGit/"
                        >
                            <span class="title flex-center">
                                <span class="post-nav-title-item">13.和小达一起学Git</span>
                                <span class="post-nav-item">Next posts</span>
                            </span>
                            <span class="right arrow-icon flex-center">
                              <i class="fas fa-chevron-right"></i>
                            </span>
                        </a>
                    </div>
                
            </div>
        

        
    </div>
</div>


                
            </div>

        </div>

        <div class="page-main-content-bottom">
            <footer class="footer">
    <div class="info-container">
        <div class="copyright-info info-item">
            &copy;
            
              <span>2022</span>
              -
            
            2022&nbsp;<i class="fas fa-heart icon-animate"></i>&nbsp;<a href="/">Eddie</a>
        </div>
        
            <script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <div class="website-count info-item">
                
                    <span id="busuanzi_container_site_uv">
                        Visitor Count&nbsp;<span id="busuanzi_value_site_uv"></span>&ensp;
                    </span>
                
                
                    <span id="busuanzi_container_site_pv">
                        Totalview&nbsp;<span id="busuanzi_value_site_pv"></span>
                    </span>
                
            </div>
        
        <div class="theme-info info-item">
            Powered by <a target="_blank" href="https://hexo.io">Hexo</a>&nbsp;|&nbsp;Theme&nbsp;<a class="theme-version" target="_blank" href="https://github.com/XPoet/hexo-theme-keep">Keep v3.4.5</a>
        </div>
        
        
    </div>
</footer>

        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="tools-list">
        <!-- TOC aside toggle -->
        
            <li class="tools-item page-aside-toggle">
                <i class="fas fa-outdent"></i>
            </li>
        

        <!-- go comment -->
        
    </ul>
</div>

        </div>
    

    <div class="right-bottom-side-tools">
        <div class="side-tools-container">
    <ul class="side-tools-list">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <li class="tools-item tool-expand-width flex-center">
            <i class="fas fa-arrows-alt-h"></i>
        </li>

        <li class="tools-item tool-dark-light-toggle flex-center">
            <i class="fas fa-moon"></i>
        </li>

        <!-- rss -->
        
            <li class="tools-item rss flex-center">
                <a class="flex-center"
                   href="/atom.xml"
                   target="_blank"
                >
                    <i class="fas fa-rss"></i>
                </a>
            </li>
        

        

        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list">
        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>
        
            <li class="tools-item tool-scroll-to-top flex-center">
                <i class="arrow-up fas fa-arrow-up"></i>
                <span class="percent"></span>
            </li>
        
    </ul>
</div>

    </div>

    
        <aside class="page-aside">
            <div class="post-toc-wrap">
    <div class="post-toc">
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#1-React%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D"><span class="nav-text">1.React基本介绍</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-1React%E7%89%B9%E7%82%B9"><span class="nav-text">1.1React特点</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-2React%E8%84%9A%E6%89%8B%E6%9E%B6"><span class="nav-text">1.2React脚手架</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-1%E8%84%9A%E6%89%8B%E6%9E%B6"><span class="nav-text">1.2.1脚手架</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-2%E4%BD%9C%E7%94%A8"><span class="nav-text">1.2.2作用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-3%E5%91%BD%E4%BB%A4%EF%BC%8C%E5%88%9D%E5%A7%8B%E5%8C%96%E9%A1%B9%E7%9B%AE"><span class="nav-text">1.2.3命令，初始化项目</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-4%E9%A1%B9%E7%9B%AE%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84%E8%B0%83%E6%95%B4"><span class="nav-text">1.2.4项目目录结构调整</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-3React%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="nav-text">1.3React基本使用</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-JSX"><span class="nav-text">2.JSX</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#2-1-createElement%E7%9A%84%E9%97%AE%E9%A2%98"><span class="nav-text">2.1 createElement的问题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-2-JSX%E7%AE%80%E4%BB%8B"><span class="nav-text">2.2 JSX简介</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-3%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4"><span class="nav-text">2.3使用步骤</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-4-JSX%E7%9A%84%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="nav-text">2.4 JSX的注意事项</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-5-prettier%E6%8F%92%E4%BB%B6%E8%87%AA%E5%8A%A8%E6%A0%BC%E5%BC%8F%E5%8C%96%E4%BB%A3%E7%A0%81"><span class="nav-text">2.5 prettier插件自动格式化代码</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-6-JSX%E4%B8%AD%E5%B5%8C%E5%85%A5JavaScript%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="nav-text">2.6 JSX中嵌入JavaScript表达式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-7%E6%9D%A1%E4%BB%B6%E6%B8%B2%E6%9F%93"><span class="nav-text">2.7条件渲染</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-8-vscode%E9%85%8D%E7%BD%AE%E8%87%AA%E5%8A%A8%E8%A1%A5%E5%85%A8"><span class="nav-text">2.8 vscode配置自动补全</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-9%E5%88%97%E8%A1%A8%E6%B8%B2%E6%9F%93"><span class="nav-text">2.9列表渲染</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-10%E6%A0%B7%E5%BC%8F"><span class="nav-text">2.10样式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-10-1%E8%A1%8C%E5%86%85%E6%A0%B7%E5%BC%8F-style"><span class="nav-text">2.10.1行内样式-style</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-10-2%E7%B1%BB%E5%90%8D-className"><span class="nav-text">2.10.2类名-className</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#base-css%E6%A0%B7%E5%BC%8F%E6%96%87%E4%BB%B6"><span class="nav-text">base.css样式文件</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-11%E6%80%BB%E7%BB%93"><span class="nav-text">2.11总结</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3-%E7%BB%84%E4%BB%B6"><span class="nav-text">3.组件</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#3-1%E7%BB%84%E4%BB%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D"><span class="nav-text">3.1组件的基本介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-2React%E5%88%9B%E5%BB%BA%E7%BB%84%E4%BB%B6"><span class="nav-text">3.2React创建组件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-1%E5%87%BD%E6%95%B0%E7%BB%84%E4%BB%B6"><span class="nav-text">3.2.1函数组件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-2%E7%9F%A5%E8%AF%86%E5%9B%9E%E9%A1%BE-%E7%B1%BB%E4%B8%8E%E7%BB%A7%E6%89%BF"><span class="nav-text">3.2.2知识回顾(类与继承)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-3%E7%B1%BB%E7%BB%84%E4%BB%B6"><span class="nav-text">3.2.3类组件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-4%E6%8F%90%E5%8F%96%E7%BB%84%E4%BB%B6%E5%88%B0%E5%8D%95%E7%8B%AC%E7%9A%84js%E6%96%87%E4%BB%B6"><span class="nav-text">3.2.4提取组件到单独的js文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-5%E6%9C%89%E7%8A%B6%E6%80%81%E7%BB%84%E4%BB%B6-x2F-%E6%97%A0%E7%8A%B6%E6%80%81%E7%BB%84%E4%BB%B6"><span class="nav-text">3.2.5有状态组件&#x2F;无状态组件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-6%E7%B1%BB%E7%BB%84%E4%BB%B6%E7%9A%84%E7%8A%B6%E6%80%81"><span class="nav-text">3.2.6类组件的状态</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86"><span class="nav-text">4.事件处理</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#4-1%E6%B3%A8%E5%86%8C%E4%BA%8B%E4%BB%B6"><span class="nav-text">4.1注册事件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-2%E4%BA%8B%E4%BB%B6%E5%AF%B9%E8%B1%A1"><span class="nav-text">4.2事件对象</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-3this%E7%9A%84%E6%8C%87%E5%90%91"><span class="nav-text">4.3this的指向</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-4-setState%E4%BF%AE%E6%94%B9%E7%8A%B6%E6%80%81"><span class="nav-text">4.4.setState修改状态</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#5-%E8%A1%A8%E5%8D%95%E7%9A%84%E5%A4%84%E7%90%86"><span class="nav-text">5.表单的处理</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#5-1%E5%8F%97%E6%8E%A7%E7%BB%84%E4%BB%B6"><span class="nav-text">5.1受控组件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-2%E5%8F%97%E6%8E%A7%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4"><span class="nav-text">5.2受控组件使用步骤</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-3%E5%B8%B8%E8%A7%81%E7%9A%84%E5%8F%97%E6%8E%A7%E7%BB%84%E4%BB%B6"><span class="nav-text">5.3常见的受控组件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-4%E5%A4%9A%E8%A1%A8%E5%8D%95%E5%85%83%E7%B4%A0%E7%9A%84%E4%BC%98%E5%8C%96"><span class="nav-text">5.4多表单元素的优化</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-5%E9%9D%9E%E5%8F%97%E6%8E%A7%E7%BB%84%E4%BB%B6"><span class="nav-text">5.5非受控组件</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#6-%E7%BB%84%E4%BB%B6%E9%80%9A%E8%AE%AF"><span class="nav-text">6.组件通讯</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#6-1props"><span class="nav-text">6.1props</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#6-1-1%E5%87%BD%E6%95%B0%E7%BB%84%E4%BB%B6%E9%80%9A%E8%AE%AF"><span class="nav-text">6.1.1函数组件通讯</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-1-2%E7%B1%BB%E7%BB%84%E4%BB%B6%E9%80%9A%E8%AE%AF"><span class="nav-text">6.1.2类组件通讯</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-1-3props%E7%9A%84%E7%89%B9%E7%82%B9"><span class="nav-text">6.1.3props的特点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-1-4props%E7%9A%84children%E5%B1%9E%E6%80%A7"><span class="nav-text">6.1.4props的children属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-1-5props%E6%A0%A1%E9%AA%8C"><span class="nav-text">6.1.5props校验</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-1-6props%E9%BB%98%E8%AE%A4%E5%80%BC"><span class="nav-text">6.1.6props默认值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A1%A5%E5%85%85%EF%BC%9A%E7%B1%BB%E7%9A%84%E9%9D%99%E6%80%81%E5%B1%9E%E6%80%A7"><span class="nav-text">补充：类的静态属性</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-2%E7%BB%84%E4%BB%B6%E9%80%9A%E8%AE%AF"><span class="nav-text">6.2组件通讯</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#6-2-1%E7%88%B6%E4%BC%A0%E5%AD%90"><span class="nav-text">6.2.1父传子</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-2-2%E5%AD%90%E4%BC%A0%E7%88%B6"><span class="nav-text">6.2.2子传父</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-2-3%E5%85%84%E5%BC%9F%E7%BB%84%E4%BB%B6%E9%80%9A%E8%AE%AF"><span class="nav-text">6.2.3兄弟组件通讯</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-2-4Context%E8%B7%A8%E7%BA%A7%E7%BB%84%E4%BB%B6%E9%80%9A%E8%AE%AF"><span class="nav-text">6.2.4Context跨级组件通讯</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-%E7%BB%84%E4%BB%B6%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="nav-text">7.组件的生命周期</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#7-1%E6%A6%82%E8%BF%B0"><span class="nav-text">7.1概述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-2%E6%8C%82%E8%BD%BD%E9%98%B6%E6%AE%B5"><span class="nav-text">7.2挂载阶段</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-3%E6%9B%B4%E6%96%B0%E9%98%B6%E6%AE%B5"><span class="nav-text">7.3更新阶段</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-4%E5%8D%B8%E8%BD%BD%E9%98%B6%E6%AE%B5"><span class="nav-text">7.4卸载阶段</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#8-setState"><span class="nav-text">8.setState()</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#8-1%E6%9B%B4%E6%96%B0%E6%95%B0%E6%8D%AE"><span class="nav-text">8.1更新数据</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-2%E6%8E%A8%E8%8D%90%E4%BD%BF%E7%94%A8%E7%9A%84setState%E8%AF%AD%E6%B3%95"><span class="nav-text">8.2推荐使用的setState语法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-2-3setState%E7%9A%84%E7%AC%AC%E4%BA%8C%E4%B8%AA%E5%8F%82%E6%95%B0"><span class="nav-text">8.2.3setState的第二个参数</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#9-%E7%BB%84%E4%BB%B6%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96"><span class="nav-text">9.组件性能优化</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#9-1%E7%BB%84%E4%BB%B6%E6%9B%B4%E6%96%B0%E6%9C%BA%E5%88%B6"><span class="nav-text">9.1组件更新机制</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-2%E5%87%8F%E8%BD%BBstate"><span class="nav-text">9.2减轻state</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-3%E9%81%BF%E5%85%8D%E4%B8%8D%E5%BF%85%E8%A6%81%E7%9A%84%E9%87%8D%E6%96%B0%E6%B8%B2%E6%9F%93"><span class="nav-text">9.3避免不必要的重新渲染</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-4%E7%BA%AF%E7%BB%84%E4%BB%B6"><span class="nav-text">9.4纯组件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-5%E7%BA%AF%E7%BB%84%E4%BB%B6%E6%AF%94%E8%BE%83-%E5%80%BC%E7%B1%BB%E5%9E%8B"><span class="nav-text">9.5纯组件比较-值类型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-6%E7%BA%AF%E7%BB%84%E4%BB%B6%E6%AF%94%E8%BE%83-%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B"><span class="nav-text">9.6纯组件比较-引用类型</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#10-React%E8%B7%AF%E7%94%B1"><span class="nav-text">10.React路由</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#10-1%E5%8D%95%E9%A1%B5%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F"><span class="nav-text">10.1单页应用程序</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10-2React%E8%B7%AF%E7%94%B1%E4%BB%8B%E7%BB%8D"><span class="nav-text">10.2React路由介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10-3%E8%B7%AF%E7%94%B1%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="nav-text">10.3路由的基本使用</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#10-3-1%E8%AF%A6%E7%BB%86%E8%AF%B4%E6%98%8E"><span class="nav-text">10.3.1详细说明</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10-3-2%E8%B7%AF%E7%94%B1%E7%9A%84%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B"><span class="nav-text">10.3.2路由的执行过程</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10-4Link%E4%B8%8ENavLink"><span class="nav-text">10.4Link与NavLink</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10-5Route"><span class="nav-text">10.5Route</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10-6Switch%E4%B8%8E404%E9%94%99%E8%AF%AF%E6%8F%90%E7%A4%BA%E9%A1%B5%E9%9D%A2"><span class="nav-text">10.6Switch与404错误提示页面</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10-7%E5%B5%8C%E5%A5%97%E8%B7%AF%E7%94%B1%E7%9A%84%E9%85%8D%E7%BD%AE"><span class="nav-text">10.7嵌套路由的配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10-8Redirect%E9%87%8D%E5%AE%9A%E5%90%91"><span class="nav-text">10.8Redirect重定向</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10-9%E7%BC%96%E7%A8%8B%E5%BC%8F%E5%AF%BC%E8%88%AA"><span class="nav-text">10.9编程式导航</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10-10%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%82%E6%95%B0%E8%8E%B7%E5%8F%96"><span class="nav-text">10.10动态路由与路由参数获取</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#11-Ant-Design%E7%BB%84%E4%BB%B6%E5%BA%93"><span class="nav-text">11.Ant Design组件库</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85"><span class="nav-text">安装</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AF%BC%E5%85%A5%E5%85%A8%E5%B1%80%E6%A0%B7%E5%BC%8F"><span class="nav-text">导入全局样式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AF%BC%E5%85%A5%E7%BB%84%E4%BB%B6"><span class="nav-text">导入组件</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#12-React%E7%BB%84%E4%BB%B6%E5%A4%8D%E7%94%A8"><span class="nav-text">12. React组件复用</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#12-1%E7%BB%84%E4%BB%B6%E5%A4%8D%E7%94%A8%E8%AF%B4%E6%98%8E"><span class="nav-text">12.1组件复用说明</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#12-2render-props%E4%BD%BF%E7%94%A8"><span class="nav-text">12.2render-props使用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#12-3%E9%AB%98%E9%98%B6%E7%BB%84%E4%BB%B6-HOC-higher-order-component"><span class="nav-text">12.3高阶组件  HOC higher order component</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#13-Hooks"><span class="nav-text">13.Hooks</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#13-1React-Hooks-%E4%BB%8B%E7%BB%8D"><span class="nav-text">13.1React Hooks 介绍</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#13-1-1Hooks-%E6%98%AF%E4%BB%80%E4%B9%88"><span class="nav-text">13.1.1Hooks 是什么</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#13-1-2%E7%BB%84%E4%BB%B6%E5%BC%80%E5%8F%91%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%AF%B9%E6%AF%94"><span class="nav-text">13.1.2组件开发模式的对比</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#13-1-3%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E6%9C%89-Hooks"><span class="nav-text">13.1.3为什么要有 Hooks</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#13-1-4hooks%E7%9A%84%E4%BC%98%E5%8A%BF"><span class="nav-text">13.1.4hooks的优势</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#13-1-5%E5%89%8D%E9%9D%A2%E7%9A%84-React-%E7%9F%A5%E8%AF%86%E6%98%AF%E6%9C%89%E7%94%A8%E7%9A%84"><span class="nav-text">13.1.5前面的 React 知识是有用的</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-2useState-Hook"><span class="nav-text">13.2useState Hook</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#13-2-1useState-Hook-%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="nav-text">13.2.1useState Hook 的基本使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#13-2-2%E7%8A%B6%E6%80%81%E7%9A%84%E8%AF%BB%E5%8F%96%E5%92%8C%E4%BF%AE%E6%94%B9"><span class="nav-text">13.2.2状态的读取和修改</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#13-2-3%E7%BB%84%E4%BB%B6%E7%9A%84%E6%9B%B4%E6%96%B0%E8%BF%87%E7%A8%8B"><span class="nav-text">13.2.3组件的更新过程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#12-3-4%E4%B8%BA%E5%87%BD%E6%95%B0%E7%BB%84%E4%BB%B6%E6%B7%BB%E5%8A%A0%E5%A4%9A%E4%B8%AA%E7%8A%B6%E6%80%81"><span class="nav-text">12.3.4为函数组件添加多个状态</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#12-3-5hooks-%E7%9A%84%E4%BD%BF%E7%94%A8%E8%A7%84%E5%88%99"><span class="nav-text">12.3.5hooks 的使用规则</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-3useEffect-Hook"><span class="nav-text">13.3useEffect Hook</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#13-3-1side-effect-%E5%89%AF%E4%BD%9C%E7%94%A8"><span class="nav-text">13.3.1side effect - 副作用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#13-3-2useEffect-%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="nav-text">13.3.2useEffect 的基本使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#13-3-3useEffect-%E7%9A%84%E4%BE%9D%E8%B5%96"><span class="nav-text">13.3.3useEffect 的依赖</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#13-3-4useEffect-%E6%B8%85%E7%90%86%E7%BB%84%E4%BB%B6%E5%89%AF%E4%BD%9C%E7%94%A8"><span class="nav-text">13.3.4useEffect 清理组件副作用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#13-3-5useEffect-%E5%8F%91%E9%80%81%E8%AF%B7%E6%B1%82"><span class="nav-text">13.3.5useEffect 发送请求</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-4%E5%87%BD%E6%95%B0%E7%BB%84%E4%BB%B6%E7%9A%84%E7%89%B9%E6%80%A7%E3%80%81%E9%97%AE%E9%A2%98"><span class="nav-text">13.4函数组件的特性、问题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-5React-memo%E9%AB%98%E9%98%B6%E7%BB%84%E4%BB%B6"><span class="nav-text">13.5React.memo高阶组件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#13-5-1React-memo-%E9%AB%98%E9%98%B6%E7%BB%84%E4%BB%B6%E7%9A%84%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%E8%AF%B4%E6%98%8E%EF%BC%9A"><span class="nav-text">13.5.1React.memo 高阶组件的使用场景说明：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#13-5-2%E8%AF%AD%E6%B3%95"><span class="nav-text">13.5.2语法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#13-5-3%E6%B5%85%E5%B1%82%E5%AF%B9%E6%AF%94"><span class="nav-text">13.5.3浅层对比</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-6useCallback"><span class="nav-text">13.6useCallback</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#13-6-1%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="nav-text">13.6.1使用场景</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#13-6-2%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="nav-text">13.6.2基本使用</span></a></li></ol></li></ol></li></ol>
    </div>
</div>
        </aside>
    

    <div class="image-viewer-container">
    <img src="">
</div>


    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fas fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="Search..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="popup-btn-close">
                <i class="fas fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    

</main>



<script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/utils.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/main.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/header-shrink.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/back2top.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/dark-light-toggle.js"></script>


    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/local-search.js"></script>



    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/code-copy.js"></script>



    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/lazyload.js"></script>


<div class="post-scripts pjax">
    
        <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/left-side-toggle.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/libs/anime.min.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/toc.js"></script>
    
</div>


    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.5/source/js/libs/pjax.min.js"></script>
<script>
    window.addEventListener('DOMContentLoaded', () => {
        window.pjax = new Pjax({
            selectors: [
                'head title',
                '.page-container',
                '.pjax'
            ],
            history: true,
            debug: false,
            cacheBust: false,
            timeout: 0,
            analytics: false,
            currentUrlFullReload: false,
            scrollRestoration: false,
            // scrollTo: true,
        });

        document.addEventListener('pjax:send', () => {
            KEEP.utils.pjaxProgressBarStart();
        });

        document.addEventListener('pjax:complete', () => {
            KEEP.utils.pjaxProgressBarEnd();
            window.pjax.executeScripts(document.querySelectorAll('script[data-pjax], .pjax script'));
            KEEP.refresh();
        });
    });
</script>



</body>
</html>
